{"version":3,"file":"esri-leaflet-debug.js","sources":["../src/Support.js","../src/Options.js","../src/Request.js","../node_modules/@terraformer/arcgis/dist/t-arcgis.esm.js","../src/Util.js","../src/Tasks/Task.js","../src/Tasks/Query.js","../src/Tasks/Find.js","../src/Tasks/Identify.js","../src/Tasks/IdentifyFeatures.js","../src/Tasks/IdentifyImage.js","../src/Services/Service.js","../src/Services/MapService.js","../src/Services/ImageService.js","../src/Services/FeatureLayerService.js","../src/Layers/BasemapLayer.js","../src/Layers/TiledMapLayer.js","../src/Layers/RasterLayer.js","../src/Layers/ImageMapLayer.js","../src/Layers/DynamicMapLayer.js","../src/Layers/FeatureLayer/FeatureGrid.js","../node_modules/tiny-binary-search/index.js","../src/Layers/FeatureLayer/FeatureManager.js","../src/Layers/FeatureLayer/FeatureLayer.js","../src/EsriLeaflet.js"],"sourcesContent":["export var cors = ((window.XMLHttpRequest && 'withCredentials' in new window.XMLHttpRequest()));\r\nexport var pointerEvents = document.documentElement.style.pointerEvents === '';\r\n\r\nexport var Support = {\r\n  cors: cors,\r\n  pointerEvents: pointerEvents\r\n};\r\n\r\nexport default Support;\r\n","export var options = {\r\n  attributionWidthOffset: 55\r\n};\r\n\r\nexport default options;\r\n","import { Util, DomUtil } from 'leaflet';\r\nimport { Support } from './Support';\r\n\r\nvar callbacks = 0;\r\n\r\nfunction serialize (params) {\r\n  var data = '';\r\n\r\n  params.f = params.f || 'json';\r\n\r\n  for (var key in params) {\r\n    if (params.hasOwnProperty(key)) {\r\n      var param = params[key];\r\n      var type = Object.prototype.toString.call(param);\r\n      var value;\r\n\r\n      if (data.length) {\r\n        data += '&';\r\n      }\r\n\r\n      if (type === '[object Array]') {\r\n        value = (Object.prototype.toString.call(param[0]) === '[object Object]') ? JSON.stringify(param) : param.join(',');\r\n      } else if (type === '[object Object]') {\r\n        value = JSON.stringify(param);\r\n      } else if (type === '[object Date]') {\r\n        value = param.valueOf();\r\n      } else {\r\n        value = param;\r\n      }\r\n\r\n      data += encodeURIComponent(key) + '=' + encodeURIComponent(value);\r\n    }\r\n  }\r\n\r\n  return data;\r\n}\r\n\r\nfunction createRequest (callback, context) {\r\n  var httpRequest = new window.XMLHttpRequest();\r\n\r\n  httpRequest.onerror = function (e) {\r\n    httpRequest.onreadystatechange = Util.falseFn;\r\n\r\n    callback.call(context, {\r\n      error: {\r\n        code: 500,\r\n        message: 'XMLHttpRequest error'\r\n      }\r\n    }, null);\r\n  };\r\n\r\n  httpRequest.onreadystatechange = function () {\r\n    var response;\r\n    var error;\r\n\r\n    if (httpRequest.readyState === 4) {\r\n      try {\r\n        response = JSON.parse(httpRequest.responseText);\r\n      } catch (e) {\r\n        response = null;\r\n        error = {\r\n          code: 500,\r\n          message: 'Could not parse response as JSON. This could also be caused by a CORS or XMLHttpRequest error.'\r\n        };\r\n      }\r\n\r\n      if (!error && response.error) {\r\n        error = response.error;\r\n        response = null;\r\n      }\r\n\r\n      httpRequest.onerror = Util.falseFn;\r\n\r\n      callback.call(context, error, response);\r\n    }\r\n  };\r\n\r\n  httpRequest.ontimeout = function () {\r\n    this.onerror();\r\n  };\r\n\r\n  return httpRequest;\r\n}\r\n\r\nfunction xmlHttpPost (url, params, callback, context) {\r\n  var httpRequest = createRequest(callback, context);\r\n  httpRequest.open('POST', url);\r\n\r\n  if (typeof context !== 'undefined' && context !== null) {\r\n    if (typeof context.options !== 'undefined') {\r\n      httpRequest.timeout = context.options.timeout;\r\n    }\r\n  }\r\n  httpRequest.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded; charset=UTF-8');\r\n  httpRequest.send(serialize(params));\r\n\r\n  return httpRequest;\r\n}\r\n\r\nfunction xmlHttpGet (url, params, callback, context) {\r\n  var httpRequest = createRequest(callback, context);\r\n  httpRequest.open('GET', url + '?' + serialize(params), true);\r\n\r\n  if (typeof context !== 'undefined' && context !== null) {\r\n    if (typeof context.options !== 'undefined') {\r\n      httpRequest.timeout = context.options.timeout;\r\n    }\r\n  }\r\n  httpRequest.send(null);\r\n\r\n  return httpRequest;\r\n}\r\n\r\n// AJAX handlers for CORS (modern browsers) or JSONP (older browsers)\r\nexport function request (url, params, callback, context) {\r\n  var paramString = serialize(params);\r\n  var httpRequest = createRequest(callback, context);\r\n  var requestLength = (url + '?' + paramString).length;\r\n\r\n  // ie10/11 require the request be opened before a timeout is applied\r\n  if (requestLength <= 2000 && Support.cors) {\r\n    httpRequest.open('GET', url + '?' + paramString);\r\n  } else if (requestLength > 2000 && Support.cors) {\r\n    httpRequest.open('POST', url);\r\n    httpRequest.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded; charset=UTF-8');\r\n  }\r\n\r\n  if (typeof context !== 'undefined' && context !== null) {\r\n    if (typeof context.options !== 'undefined') {\r\n      httpRequest.timeout = context.options.timeout;\r\n    }\r\n  }\r\n\r\n  // request is less than 2000 characters and the browser supports CORS, make GET request with XMLHttpRequest\r\n  if (requestLength <= 2000 && Support.cors) {\r\n    httpRequest.send(null);\r\n\r\n  // request is more than 2000 characters and the browser supports CORS, make POST request with XMLHttpRequest\r\n  } else if (requestLength > 2000 && Support.cors) {\r\n    httpRequest.send(paramString);\r\n\r\n  // request is less  than 2000 characters and the browser does not support CORS, make a JSONP request\r\n  } else if (requestLength <= 2000 && !Support.cors) {\r\n    return jsonp(url, params, callback, context);\r\n\r\n  // request is longer then 2000 characters and the browser does not support CORS, log a warning\r\n  } else {\r\n    warn('a request to ' + url + ' was longer then 2000 characters and this browser cannot make a cross-domain post request. Please use a proxy http://esri.github.io/esri-leaflet/api-reference/request.html');\r\n    return;\r\n  }\r\n\r\n  return httpRequest;\r\n}\r\n\r\nexport function jsonp (url, params, callback, context) {\r\n  window._EsriLeafletCallbacks = window._EsriLeafletCallbacks || {};\r\n  var callbackId = 'c' + callbacks;\r\n  params.callback = 'window._EsriLeafletCallbacks.' + callbackId;\r\n\r\n  window._EsriLeafletCallbacks[callbackId] = function (response) {\r\n    if (window._EsriLeafletCallbacks[callbackId] !== true) {\r\n      var error;\r\n      var responseType = Object.prototype.toString.call(response);\r\n\r\n      if (!(responseType === '[object Object]' || responseType === '[object Array]')) {\r\n        error = {\r\n          error: {\r\n            code: 500,\r\n            message: 'Expected array or object as JSONP response'\r\n          }\r\n        };\r\n        response = null;\r\n      }\r\n\r\n      if (!error && response.error) {\r\n        error = response;\r\n        response = null;\r\n      }\r\n\r\n      callback.call(context, error, response);\r\n      window._EsriLeafletCallbacks[callbackId] = true;\r\n    }\r\n  };\r\n\r\n  var script = DomUtil.create('script', null, document.body);\r\n  script.type = 'text/javascript';\r\n  script.src = url + '?' + serialize(params);\r\n  script.id = callbackId;\r\n  script.onerror = function (error) {\r\n    if (error && window._EsriLeafletCallbacks[callbackId] !== true) {\r\n      // Can't get true error code: it can be 404, or 401, or 500\r\n      var err = {\r\n        error: {\r\n          code: 500,\r\n          message: 'An unknown error occurred'\r\n        }\r\n      };\r\n\r\n      callback.call(context, err);\r\n      window._EsriLeafletCallbacks[callbackId] = true;\r\n    }\r\n  };\r\n  DomUtil.addClass(script, 'esri-leaflet-jsonp');\r\n\r\n  callbacks++;\r\n\r\n  return {\r\n    id: callbackId,\r\n    url: script.src,\r\n    abort: function () {\r\n      window._EsriLeafletCallbacks._callback[callbackId]({\r\n        code: 0,\r\n        message: 'Request aborted.'\r\n      });\r\n    }\r\n  };\r\n}\r\n\r\nvar get = ((Support.cors) ? xmlHttpGet : jsonp);\r\nget.CORS = xmlHttpGet;\r\nget.JSONP = jsonp;\r\n\r\nexport function warn () {\r\n  if (console && console.warn) {\r\n    console.warn.apply(console, arguments);\r\n  }\r\n}\r\n\r\n// choose the correct AJAX handler depending on CORS support\r\nexport { get };\r\n\r\n// always use XMLHttpRequest for posts\r\nexport { xmlHttpPost as post };\r\n\r\n// export the Request object to call the different handlers for debugging\r\nexport var Request = {\r\n  request: request,\r\n  get: get,\r\n  post: xmlHttpPost\r\n};\r\n\r\nexport default Request;\r\n","/* @preserve\n* @terraformer/arcgis - v2.0.1 - MIT\n* Copyright (c) 2012-2020 Environmental Systems Research Institute, Inc.\n* Thu Apr 16 2020 00:19:41 GMT-0700 (Pacific Daylight Time)\n*/\n/* Copyright (c) 2012-2019 Environmental Systems Research Institute, Inc.\n * Apache-2.0 */\n\nconst edgeIntersectsEdge = (a1, a2, b1, b2) => {\n  var uaT = (b2[0] - b1[0]) * (a1[1] - b1[1]) - (b2[1] - b1[1]) * (a1[0] - b1[0]);\n  var ubT = (a2[0] - a1[0]) * (a1[1] - b1[1]) - (a2[1] - a1[1]) * (a1[0] - b1[0]);\n  var uB = (b2[1] - b1[1]) * (a2[0] - a1[0]) - (b2[0] - b1[0]) * (a2[1] - a1[1]);\n\n  if (uB !== 0) {\n    var ua = uaT / uB;\n    var ub = ubT / uB;\n\n    if (ua >= 0 && ua <= 1 && ub >= 0 && ub <= 1) {\n      return true;\n    }\n  }\n\n  return false;\n};\n\nconst coordinatesContainPoint = (coordinates, point) => {\n  let contains = false;\n  for (let i = -1, l = coordinates.length, j = l - 1; ++i < l; j = i) {\n    if (((coordinates[i][1] <= point[1] && point[1] < coordinates[j][1]) ||\n         (coordinates[j][1] <= point[1] && point[1] < coordinates[i][1])) &&\n        (point[0] < (coordinates[j][0] - coordinates[i][0]) * (point[1] - coordinates[i][1]) / (coordinates[j][1] - coordinates[i][1]) + coordinates[i][0])) {\n      contains = !contains;\n    }\n  }\n  return contains;\n};\n\nconst pointsEqual = (a, b) => {\n  for (let i = 0; i < a.length; i++) {\n    if (a[i] !== b[i]) {\n      return false;\n    }\n  }\n\n  return true;\n};\n\nconst arrayIntersectsArray = (a, b) => {\n  for (let i = 0; i < a.length - 1; i++) {\n    for (let j = 0; j < b.length - 1; j++) {\n      if (edgeIntersectsEdge(a[i], a[i + 1], b[j], b[j + 1])) {\n        return true;\n      }\n    }\n  }\n  return false;\n};\n\n/* Copyright (c) 2012-2019 Environmental Systems Research Institute, Inc.\n * Apache-2.0 */\n\n// checks if the first and last points of a ring are equal and closes the ring\nconst closeRing = (coordinates) => {\n  if (!pointsEqual(coordinates[0], coordinates[coordinates.length - 1])) {\n    coordinates.push(coordinates[0]);\n  }\n  return coordinates;\n};\n\n// determine if polygon ring coordinates are clockwise. clockwise signifies outer ring, counter-clockwise an inner ring\n// or hole. this logic was found at http://stackoverflow.com/questions/1165647/how-to-determine-if-a-list-of-polygon-\n// points-are-in-clockwise-order\nconst ringIsClockwise = (ringToTest) => {\n  var total = 0;\n  var i = 0;\n  var rLength = ringToTest.length;\n  var pt1 = ringToTest[i];\n  var pt2;\n  for (i; i < rLength - 1; i++) {\n    pt2 = ringToTest[i + 1];\n    total += (pt2[0] - pt1[0]) * (pt2[1] + pt1[1]);\n    pt1 = pt2;\n  }\n  return (total >= 0);\n};\n\n// shallow object clone for feature properties and attributes\n// from http://jsperf.com/cloning-an-object/2\nconst shallowClone = (obj) => {\n  var target = {};\n  for (var i in obj) {\n    if (obj.hasOwnProperty(i)) {\n      target[i] = obj[i];\n    }\n  }\n  return target;\n};\n\n/* Copyright (c) 2012-2019 Environmental Systems Research Institute, Inc.\n * Apache-2.0 */\n\nconst coordinatesContainCoordinates = (outer, inner) => {\n  var intersects = arrayIntersectsArray(outer, inner);\n  var contains = coordinatesContainPoint(outer, inner[0]);\n  if (!intersects && contains) {\n    return true;\n  }\n  return false;\n};\n\n// do any polygons in this array contain any other polygons in this array?\n// used for checking for holes in arcgis rings\nconst convertRingsToGeoJSON = (rings) => {\n  var outerRings = [];\n  var holes = [];\n  var x; // iterator\n  var outerRing; // current outer ring being evaluated\n  var hole; // current hole being evaluated\n\n  // for each ring\n  for (var r = 0; r < rings.length; r++) {\n    var ring = closeRing(rings[r].slice(0));\n    if (ring.length < 4) {\n      continue;\n    }\n    // is this ring an outer ring? is it clockwise?\n    if (ringIsClockwise(ring)) {\n      var polygon = [ ring.slice().reverse() ]; // wind outer rings counterclockwise for RFC 7946 compliance\n      outerRings.push(polygon); // push to outer rings\n    } else {\n      holes.push(ring.slice().reverse()); // wind inner rings clockwise for RFC 7946 compliance\n    }\n  }\n\n  var uncontainedHoles = [];\n\n  // while there are holes left...\n  while (holes.length) {\n    // pop a hole off out stack\n    hole = holes.pop();\n\n    // loop over all outer rings and see if they contain our hole.\n    var contained = false;\n    for (x = outerRings.length - 1; x >= 0; x--) {\n      outerRing = outerRings[x][0];\n      if (coordinatesContainCoordinates(outerRing, hole)) {\n        // the hole is contained push it into our polygon\n        outerRings[x].push(hole);\n        contained = true;\n        break;\n      }\n    }\n\n    // ring is not contained in any outer ring\n    // sometimes this happens https://github.com/Esri/esri-leaflet/issues/320\n    if (!contained) {\n      uncontainedHoles.push(hole);\n    }\n  }\n\n  // if we couldn't match any holes using contains we can try intersects...\n  while (uncontainedHoles.length) {\n    // pop a hole off out stack\n    hole = uncontainedHoles.pop();\n\n    // loop over all outer rings and see if any intersect our hole.\n    var intersects = false;\n\n    for (x = outerRings.length - 1; x >= 0; x--) {\n      outerRing = outerRings[x][0];\n      if (arrayIntersectsArray(outerRing, hole)) {\n        // the hole is contained push it into our polygon\n        outerRings[x].push(hole);\n        intersects = true;\n        break;\n      }\n    }\n\n    if (!intersects) {\n      outerRings.push([hole.reverse()]);\n    }\n  }\n\n  if (outerRings.length === 1) {\n    return {\n      type: 'Polygon',\n      coordinates: outerRings[0]\n    };\n  } else {\n    return {\n      type: 'MultiPolygon',\n      coordinates: outerRings\n    };\n  }\n};\n\nconst getId = (attributes, idAttribute) => {\n  var keys = idAttribute ? [idAttribute, 'OBJECTID', 'FID'] : ['OBJECTID', 'FID'];\n  for (var i = 0; i < keys.length; i++) {\n    var key = keys[i];\n    if (\n      key in attributes &&\n      (typeof attributes[key] === 'string' ||\n        typeof attributes[key] === 'number')\n    ) {\n      return attributes[key];\n    }\n  }\n  throw Error('No valid id attribute found');\n};\n\nconst arcgisToGeoJSON = (arcgis, idAttribute) => {\n  var geojson = {};\n\n  if (arcgis.features) {\n    geojson.type = 'FeatureCollection';\n    geojson.features = [];\n    for (var i = 0; i < arcgis.features.length; i++) {\n      geojson.features.push(arcgisToGeoJSON(arcgis.features[i], idAttribute));\n    }\n  }\n\n  if (typeof arcgis.x === 'number' && typeof arcgis.y === 'number') {\n    geojson.type = 'Point';\n    geojson.coordinates = [arcgis.x, arcgis.y];\n    if (typeof arcgis.z === 'number') {\n      geojson.coordinates.push(arcgis.z);\n    }\n  }\n\n  if (arcgis.points) {\n    geojson.type = 'MultiPoint';\n    geojson.coordinates = arcgis.points.slice(0);\n  }\n\n  if (arcgis.paths) {\n    if (arcgis.paths.length === 1) {\n      geojson.type = 'LineString';\n      geojson.coordinates = arcgis.paths[0].slice(0);\n    } else {\n      geojson.type = 'MultiLineString';\n      geojson.coordinates = arcgis.paths.slice(0);\n    }\n  }\n\n  if (arcgis.rings) {\n    geojson = convertRingsToGeoJSON(arcgis.rings.slice(0));\n  }\n\n  if (\n    typeof arcgis.xmin === 'number' &&\n    typeof arcgis.ymin === 'number' &&\n    typeof arcgis.xmax === 'number' &&\n    typeof arcgis.ymax === 'number'\n  ) {\n    geojson.type = 'Polygon';\n    geojson.coordinates = [[\n      [arcgis.xmax, arcgis.ymax],\n      [arcgis.xmin, arcgis.ymax],\n      [arcgis.xmin, arcgis.ymin],\n      [arcgis.xmax, arcgis.ymin],\n      [arcgis.xmax, arcgis.ymax]\n    ]];\n  }\n\n  if (arcgis.geometry || arcgis.attributes) {\n    geojson.type = 'Feature';\n    geojson.geometry = (arcgis.geometry) ? arcgisToGeoJSON(arcgis.geometry) : null;\n    geojson.properties = (arcgis.attributes) ? shallowClone(arcgis.attributes) : null;\n    if (arcgis.attributes) {\n      try {\n        geojson.id = getId(arcgis.attributes, idAttribute);\n      } catch (err) {\n        // don't set an id\n      }\n    }\n  }\n\n  // if no valid geometry was encountered\n  if (JSON.stringify(geojson.geometry) === JSON.stringify({})) {\n    geojson.geometry = null;\n  }\n\n  if (\n    arcgis.spatialReference &&\n    arcgis.spatialReference.wkid &&\n    arcgis.spatialReference.wkid !== 4326\n  ) {\n    console.warn('Object converted in non-standard crs - ' + JSON.stringify(arcgis.spatialReference));\n  }\n\n  return geojson;\n};\n\n/* Copyright (c) 2012-2019 Environmental Systems Research Institute, Inc.\n * Apache-2.0 */\n\n// This function ensures that rings are oriented in the right directions\n// outer rings are clockwise, holes are counterclockwise\n// used for converting GeoJSON Polygons to ArcGIS Polygons\nconst orientRings = (poly) => {\n  var output = [];\n  var polygon = poly.slice(0);\n  var outerRing = closeRing(polygon.shift().slice(0));\n  if (outerRing.length >= 4) {\n    if (!ringIsClockwise(outerRing)) {\n      outerRing.reverse();\n    }\n\n    output.push(outerRing);\n\n    for (var i = 0; i < polygon.length; i++) {\n      var hole = closeRing(polygon[i].slice(0));\n      if (hole.length >= 4) {\n        if (ringIsClockwise(hole)) {\n          hole.reverse();\n        }\n        output.push(hole);\n      }\n    }\n  }\n\n  return output;\n};\n\n// This function flattens holes in multipolygons to one array of polygons\n// used for converting GeoJSON Polygons to ArcGIS Polygons\nconst flattenMultiPolygonRings = (rings) => {\n  var output = [];\n  for (var i = 0; i < rings.length; i++) {\n    var polygon = orientRings(rings[i]);\n    for (var x = polygon.length - 1; x >= 0; x--) {\n      var ring = polygon[x].slice(0);\n      output.push(ring);\n    }\n  }\n  return output;\n};\n\nconst geojsonToArcGIS = (geojson, idAttribute) => {\n  idAttribute = idAttribute || 'OBJECTID';\n  var spatialReference = { wkid: 4326 };\n  var result = {};\n  var i;\n\n  switch (geojson.type) {\n    case 'Point':\n      result.x = geojson.coordinates[0];\n      result.y = geojson.coordinates[1];\n      result.spatialReference = spatialReference;\n      break;\n    case 'MultiPoint':\n      result.points = geojson.coordinates.slice(0);\n      result.spatialReference = spatialReference;\n      break;\n    case 'LineString':\n      result.paths = [geojson.coordinates.slice(0)];\n      result.spatialReference = spatialReference;\n      break;\n    case 'MultiLineString':\n      result.paths = geojson.coordinates.slice(0);\n      result.spatialReference = spatialReference;\n      break;\n    case 'Polygon':\n      result.rings = orientRings(geojson.coordinates.slice(0));\n      result.spatialReference = spatialReference;\n      break;\n    case 'MultiPolygon':\n      result.rings = flattenMultiPolygonRings(geojson.coordinates.slice(0));\n      result.spatialReference = spatialReference;\n      break;\n    case 'Feature':\n      if (geojson.geometry) {\n        result.geometry = geojsonToArcGIS(geojson.geometry, idAttribute);\n      }\n      result.attributes = (geojson.properties) ? shallowClone(geojson.properties) : {};\n      if (geojson.id) {\n        result.attributes[idAttribute] = geojson.id;\n      }\n      break;\n    case 'FeatureCollection':\n      result = [];\n      for (i = 0; i < geojson.features.length; i++) {\n        result.push(geojsonToArcGIS(geojson.features[i], idAttribute));\n      }\n      break;\n    case 'GeometryCollection':\n      result = [];\n      for (i = 0; i < geojson.geometries.length; i++) {\n        result.push(geojsonToArcGIS(geojson.geometries[i], idAttribute));\n      }\n      break;\n  }\n\n  return result;\n};\n\n/* Copyright (c) 2012-2019 Environmental Systems Research Institute, Inc.\n * Apache-2.0 */\n\nexport { arcgisToGeoJSON, geojsonToArcGIS };\n","import { latLng, latLngBounds, LatLng, LatLngBounds, Util, DomUtil, GeoJSON } from 'leaflet';\r\nimport { request, warn } from './Request';\r\nimport { options } from './Options';\r\nimport { Support } from './Support';\r\n\r\nimport {\r\n  geojsonToArcGIS as g2a,\r\n  arcgisToGeoJSON as a2g\r\n} from '@terraformer/arcgis';\r\n\r\nexport function geojsonToArcGIS (geojson, idAttr) {\r\n  return g2a(geojson, idAttr);\r\n}\r\n\r\nexport function arcgisToGeoJSON (arcgis, idAttr) {\r\n  return a2g(arcgis, idAttr);\r\n}\r\n\r\n// convert an extent (ArcGIS) to LatLngBounds (Leaflet)\r\nexport function extentToBounds (extent) {\r\n  // \"NaN\" coordinates from ArcGIS Server indicate a null geometry\r\n  if (extent.xmin !== 'NaN' && extent.ymin !== 'NaN' && extent.xmax !== 'NaN' && extent.ymax !== 'NaN') {\r\n    var sw = latLng(extent.ymin, extent.xmin);\r\n    var ne = latLng(extent.ymax, extent.xmax);\r\n    return latLngBounds(sw, ne);\r\n  } else {\r\n    return null;\r\n  }\r\n}\r\n\r\n// convert an LatLngBounds (Leaflet) to extent (ArcGIS)\r\nexport function boundsToExtent (bounds) {\r\n  bounds = latLngBounds(bounds);\r\n  return {\r\n    'xmin': bounds.getSouthWest().lng,\r\n    'ymin': bounds.getSouthWest().lat,\r\n    'xmax': bounds.getNorthEast().lng,\r\n    'ymax': bounds.getNorthEast().lat,\r\n    'spatialReference': {\r\n      'wkid': 4326\r\n    }\r\n  };\r\n}\r\n\r\nvar knownFieldNames = /^(OBJECTID|FID|OID|ID)$/i;\r\n\r\n// Attempts to find the ID Field from response\r\nexport function _findIdAttributeFromResponse (response) {\r\n  var result;\r\n\r\n  if (response.objectIdFieldName) {\r\n    // Find Id Field directly\r\n    result = response.objectIdFieldName;\r\n  } else if (response.fields) {\r\n    // Find ID Field based on field type\r\n    for (var j = 0; j <= response.fields.length - 1; j++) {\r\n      if (response.fields[j].type === 'esriFieldTypeOID') {\r\n        result = response.fields[j].name;\r\n        break;\r\n      }\r\n    }\r\n    if (!result) {\r\n      // If no field was marked as being the esriFieldTypeOID try well known field names\r\n      for (j = 0; j <= response.fields.length - 1; j++) {\r\n        if (response.fields[j].name.match(knownFieldNames)) {\r\n          result = response.fields[j].name;\r\n          break;\r\n        }\r\n      }\r\n    }\r\n  }\r\n  return result;\r\n}\r\n\r\n// This is the 'last' resort, find the Id field from the specified feature\r\nexport function _findIdAttributeFromFeature (feature) {\r\n  for (var key in feature.attributes) {\r\n    if (key.match(knownFieldNames)) {\r\n      return key;\r\n    }\r\n  }\r\n}\r\n\r\nexport function responseToFeatureCollection (response, idAttribute) {\r\n  var objectIdField;\r\n  var features = response.features || response.results;\r\n  var count = features.length;\r\n\r\n  if (idAttribute) {\r\n    objectIdField = idAttribute;\r\n  } else {\r\n    objectIdField = _findIdAttributeFromResponse(response);\r\n  }\r\n\r\n  var featureCollection = {\r\n    type: 'FeatureCollection',\r\n    features: []\r\n  };\r\n\r\n  if (count) {\r\n    for (var i = features.length - 1; i >= 0; i--) {\r\n      var feature = arcgisToGeoJSON(features[i], objectIdField || _findIdAttributeFromFeature(features[i]));\r\n      featureCollection.features.push(feature);\r\n    }\r\n  }\r\n\r\n  return featureCollection;\r\n}\r\n\r\n  // trim url whitespace and add a trailing slash if needed\r\nexport function cleanUrl (url) {\r\n  // trim leading and trailing spaces, but not spaces inside the url\r\n  url = Util.trim(url);\r\n\r\n  // add a trailing slash to the url if the user omitted it\r\n  if (url[url.length - 1] !== '/') {\r\n    url += '/';\r\n  }\r\n\r\n  return url;\r\n}\r\n\r\n/* Extract url params if any and store them in requestParams attribute.\r\n   Return the options params updated */\r\nexport function getUrlParams (options) {\r\n  if (options.url.indexOf('?') !== -1) {\r\n    options.requestParams = options.requestParams || {};\r\n    var queryString = options.url.substring(options.url.indexOf('?') + 1);\r\n    options.url = options.url.split('?')[0];\r\n    options.requestParams = JSON.parse('{\"' + decodeURI(queryString).replace(/\"/g, '\\\\\"').replace(/&/g, '\",\"').replace(/=/g, '\":\"') + '\"}');\r\n  }\r\n  options.url = cleanUrl(options.url.split('?')[0]);\r\n  return options;\r\n}\r\n\r\nexport function isArcgisOnline (url) {\r\n  /* hosted feature services support geojson as an output format\r\n  utility.arcgis.com services are proxied from a variety of ArcGIS Server vintages, and may not */\r\n  return (/^(?!.*utility\\.arcgis\\.com).*\\.arcgis\\.com.*FeatureServer/i).test(url);\r\n}\r\n\r\nexport function geojsonTypeToArcGIS (geoJsonType) {\r\n  var arcgisGeometryType;\r\n  switch (geoJsonType) {\r\n    case 'Point':\r\n      arcgisGeometryType = 'esriGeometryPoint';\r\n      break;\r\n    case 'MultiPoint':\r\n      arcgisGeometryType = 'esriGeometryMultipoint';\r\n      break;\r\n    case 'LineString':\r\n      arcgisGeometryType = 'esriGeometryPolyline';\r\n      break;\r\n    case 'MultiLineString':\r\n      arcgisGeometryType = 'esriGeometryPolyline';\r\n      break;\r\n    case 'Polygon':\r\n      arcgisGeometryType = 'esriGeometryPolygon';\r\n      break;\r\n    case 'MultiPolygon':\r\n      arcgisGeometryType = 'esriGeometryPolygon';\r\n      break;\r\n  }\r\n\r\n  return arcgisGeometryType;\r\n}\r\n\r\nexport function calcAttributionWidth (map) {\r\n  // either crop at 55px or user defined buffer\r\n  return (map.getSize().x - options.attributionWidthOffset) + 'px';\r\n}\r\n\r\nexport function setEsriAttribution (map) {\r\n  if (map.attributionControl && !map.attributionControl._esriAttributionAdded) {\r\n    map.attributionControl.setPrefix('<a href=\"http://leafletjs.com\" title=\"A JS library for interactive maps\">Leaflet</a> | Powered by <a href=\"https://www.esri.com\">Esri</a>');\r\n\r\n    var hoverAttributionStyle = document.createElement('style');\r\n    hoverAttributionStyle.type = 'text/css';\r\n    hoverAttributionStyle.innerHTML = '.esri-truncated-attribution:hover {' +\r\n      'white-space: normal;' +\r\n    '}';\r\n\r\n    document.getElementsByTagName('head')[0].appendChild(hoverAttributionStyle);\r\n    DomUtil.addClass(map.attributionControl._container, 'esri-truncated-attribution:hover');\r\n\r\n    // define a new css class in JS to trim attribution into a single line\r\n    var attributionStyle = document.createElement('style');\r\n    attributionStyle.type = 'text/css';\r\n    attributionStyle.innerHTML = '.esri-truncated-attribution {' +\r\n      'vertical-align: -3px;' +\r\n      'white-space: nowrap;' +\r\n      'overflow: hidden;' +\r\n      'text-overflow: ellipsis;' +\r\n      'display: inline-block;' +\r\n      'transition: 0s white-space;' +\r\n      'transition-delay: 1s;' +\r\n      'max-width: ' + calcAttributionWidth(map) + ';' +\r\n    '}';\r\n\r\n    document.getElementsByTagName('head')[0].appendChild(attributionStyle);\r\n    DomUtil.addClass(map.attributionControl._container, 'esri-truncated-attribution');\r\n\r\n    // update the width used to truncate when the map itself is resized\r\n    map.on('resize', function (e) {\r\n      map.attributionControl._container.style.maxWidth = calcAttributionWidth(e.target);\r\n    });\r\n\r\n    map.attributionControl._esriAttributionAdded = true;\r\n  }\r\n}\r\n\r\nexport function _setGeometry (geometry) {\r\n  var params = {\r\n    geometry: null,\r\n    geometryType: null\r\n  };\r\n\r\n  // convert bounds to extent and finish\r\n  if (geometry instanceof LatLngBounds) {\r\n    // set geometry + geometryType\r\n    params.geometry = boundsToExtent(geometry);\r\n    params.geometryType = 'esriGeometryEnvelope';\r\n    return params;\r\n  }\r\n\r\n  // convert L.Marker > L.LatLng\r\n  if (geometry.getLatLng) {\r\n    geometry = geometry.getLatLng();\r\n  }\r\n\r\n  // convert L.LatLng to a geojson point and continue;\r\n  if (geometry instanceof LatLng) {\r\n    geometry = {\r\n      type: 'Point',\r\n      coordinates: [geometry.lng, geometry.lat]\r\n    };\r\n  }\r\n\r\n  // handle L.GeoJSON, pull out the first geometry\r\n  if (geometry instanceof GeoJSON) {\r\n    // reassign geometry to the GeoJSON value  (we are assuming that only one feature is present)\r\n    geometry = geometry.getLayers()[0].feature.geometry;\r\n    params.geometry = geojsonToArcGIS(geometry);\r\n    params.geometryType = geojsonTypeToArcGIS(geometry.type);\r\n  }\r\n\r\n  // Handle L.Polyline and L.Polygon\r\n  if (geometry.toGeoJSON) {\r\n    geometry = geometry.toGeoJSON();\r\n  }\r\n\r\n  // handle GeoJSON feature by pulling out the geometry\r\n  if (geometry.type === 'Feature') {\r\n    // get the geometry of the geojson feature\r\n    geometry = geometry.geometry;\r\n  }\r\n\r\n  // confirm that our GeoJSON is a point, line or polygon\r\n  if (geometry.type === 'Point' || geometry.type === 'LineString' || geometry.type === 'Polygon' || geometry.type === 'MultiPolygon') {\r\n    params.geometry = geojsonToArcGIS(geometry);\r\n    params.geometryType = geojsonTypeToArcGIS(geometry.type);\r\n    return params;\r\n  }\r\n\r\n  // warn the user if we havn't found an appropriate object\r\n  warn('invalid geometry passed to spatial query. Should be L.LatLng, L.LatLngBounds, L.Marker or a GeoJSON Point, Line, Polygon or MultiPolygon object');\r\n\r\n  return;\r\n}\r\n\r\nexport function _getAttributionData (url, map) {\r\n  if (Support.cors) {\r\n    request(url, {}, Util.bind(function (error, attributions) {\r\n      if (error) { return; }\r\n      map._esriAttributions = [];\r\n      for (var c = 0; c < attributions.contributors.length; c++) {\r\n        var contributor = attributions.contributors[c];\r\n\r\n        for (var i = 0; i < contributor.coverageAreas.length; i++) {\r\n          var coverageArea = contributor.coverageAreas[i];\r\n          var southWest = latLng(coverageArea.bbox[0], coverageArea.bbox[1]);\r\n          var northEast = latLng(coverageArea.bbox[2], coverageArea.bbox[3]);\r\n          map._esriAttributions.push({\r\n            attribution: contributor.attribution,\r\n            score: coverageArea.score,\r\n            bounds: latLngBounds(southWest, northEast),\r\n            minZoom: coverageArea.zoomMin,\r\n            maxZoom: coverageArea.zoomMax\r\n          });\r\n        }\r\n      }\r\n\r\n      map._esriAttributions.sort(function (a, b) {\r\n        return b.score - a.score;\r\n      });\r\n\r\n      // pass the same argument as the map's 'moveend' event\r\n      var obj = { target: map };\r\n      _updateMapAttribution(obj);\r\n    }, this));\r\n  }\r\n}\r\n\r\nexport function _updateMapAttribution (evt) {\r\n  var map = evt.target;\r\n  var oldAttributions = map._esriAttributions;\r\n\r\n  if (!map || !map.attributionControl) return;\r\n\r\n  var attributionElement = map.attributionControl._container.querySelector('.esri-dynamic-attribution');\r\n\r\n  if (attributionElement && oldAttributions) {\r\n    var newAttributions = '';\r\n    var bounds = map.getBounds();\r\n    var wrappedBounds = latLngBounds(\r\n      bounds.getSouthWest().wrap(),\r\n      bounds.getNorthEast().wrap()\r\n    );\r\n    var zoom = map.getZoom();\r\n\r\n    for (var i = 0; i < oldAttributions.length; i++) {\r\n      var attribution = oldAttributions[i];\r\n      var text = attribution.attribution;\r\n\r\n      if (!newAttributions.match(text) && attribution.bounds.intersects(wrappedBounds) && zoom >= attribution.minZoom && zoom <= attribution.maxZoom) {\r\n        newAttributions += (', ' + text);\r\n      }\r\n    }\r\n\r\n    newAttributions = newAttributions.substr(2);\r\n    attributionElement.innerHTML = newAttributions;\r\n    attributionElement.style.maxWidth = calcAttributionWidth(map);\r\n\r\n    map.fire('attributionupdated', {\r\n      attribution: newAttributions\r\n    });\r\n  }\r\n}\r\n\r\n// for backwards compatibility\r\nexport { warn };\r\n\r\nexport var EsriUtil = {\r\n  warn: warn,\r\n  cleanUrl: cleanUrl,\r\n  getUrlParams: getUrlParams,\r\n  isArcgisOnline: isArcgisOnline,\r\n  geojsonTypeToArcGIS: geojsonTypeToArcGIS,\r\n  responseToFeatureCollection: responseToFeatureCollection,\r\n  geojsonToArcGIS: geojsonToArcGIS,\r\n  arcgisToGeoJSON: arcgisToGeoJSON,\r\n  boundsToExtent: boundsToExtent,\r\n  extentToBounds: extentToBounds,\r\n  calcAttributionWidth: calcAttributionWidth,\r\n  setEsriAttribution: setEsriAttribution,\r\n  _setGeometry: _setGeometry,\r\n  _getAttributionData: _getAttributionData,\r\n  _updateMapAttribution: _updateMapAttribution,\r\n  _findIdAttributeFromFeature: _findIdAttributeFromFeature,\r\n  _findIdAttributeFromResponse: _findIdAttributeFromResponse\r\n};\r\n\r\nexport default EsriUtil;\r\n","import { Class, Util } from 'leaflet';\r\nimport {cors} from '../Support';\r\nimport { cleanUrl, getUrlParams } from '../Util';\r\nimport Request from '../Request';\r\n\r\nexport var Task = Class.extend({\r\n\r\n  options: {\r\n    proxy: false,\r\n    useCors: cors\r\n  },\r\n\r\n  // Generate a method for each methodName:paramName in the setters for this task.\r\n  generateSetter: function (param, context) {\r\n    return Util.bind(function (value) {\r\n      this.params[param] = value;\r\n      return this;\r\n    }, context);\r\n  },\r\n\r\n  initialize: function (endpoint) {\r\n    // endpoint can be either a url (and options) for an ArcGIS Rest Service or an instance of EsriLeaflet.Service\r\n    if (endpoint.request && endpoint.options) {\r\n      this._service = endpoint;\r\n      Util.setOptions(this, endpoint.options);\r\n    } else {\r\n      Util.setOptions(this, endpoint);\r\n      this.options.url = cleanUrl(endpoint.url);\r\n    }\r\n\r\n    // clone default params into this object\r\n    this.params = Util.extend({}, this.params || {});\r\n\r\n    // generate setter methods based on the setters object implimented a child class\r\n    if (this.setters) {\r\n      for (var setter in this.setters) {\r\n        var param = this.setters[setter];\r\n        this[setter] = this.generateSetter(param, this);\r\n      }\r\n    }\r\n  },\r\n\r\n  token: function (token) {\r\n    if (this._service) {\r\n      this._service.authenticate(token);\r\n    } else {\r\n      this.params.token = token;\r\n    }\r\n    return this;\r\n  },\r\n\r\n  // ArcGIS Server Find/Identify 10.5+\r\n  format: function (boolean) {\r\n    // use double negative to expose a more intuitive positive method name\r\n    this.params.returnUnformattedValues = !boolean;\r\n    return this;\r\n  },\r\n\r\n  request: function (callback, context) {\r\n    if (this.options.requestParams) {\r\n      Util.extend(this.params, this.options.requestParams);\r\n    }\r\n    if (this._service) {\r\n      return this._service.request(this.path, this.params, callback, context);\r\n    }\r\n\r\n    return this._request('request', this.path, this.params, callback, context);\r\n  },\r\n\r\n  _request: function (method, path, params, callback, context) {\r\n    var url = (this.options.proxy) ? this.options.proxy + '?' + this.options.url + path : this.options.url + path;\r\n\r\n    if ((method === 'get' || method === 'request') && !this.options.useCors) {\r\n      return Request.get.JSONP(url, params, callback, context);\r\n    }\r\n\r\n    return Request[method](url, params, callback, context);\r\n  }\r\n});\r\n\r\nexport function task (options) {\r\n  options = getUrlParams(options);\r\n  return new Task(options);\r\n}\r\n\r\nexport default task;\r\n","import { point, latLng } from 'leaflet';\r\nimport { Task } from './Task';\r\nimport {\r\n  warn,\r\n  responseToFeatureCollection,\r\n  isArcgisOnline,\r\n  extentToBounds,\r\n  _setGeometry\r\n} from '../Util';\r\n\r\nexport var Query = Task.extend({\r\n  setters: {\r\n    'offset': 'resultOffset',\r\n    'limit': 'resultRecordCount',\r\n    'fields': 'outFields',\r\n    'precision': 'geometryPrecision',\r\n    'featureIds': 'objectIds',\r\n    'returnGeometry': 'returnGeometry',\r\n    'returnM': 'returnM',\r\n    'transform': 'datumTransformation',\r\n    'token': 'token'\r\n  },\r\n\r\n  path: 'query',\r\n\r\n  params: {\r\n    returnGeometry: true,\r\n    where: '1=1',\r\n    outSR: 4326,\r\n    outFields: '*'\r\n  },\r\n\r\n  // Returns a feature if its shape is wholly contained within the search geometry. Valid for all shape type combinations.\r\n  within: function (geometry) {\r\n    this._setGeometryParams(geometry);\r\n    this.params.spatialRel = 'esriSpatialRelContains'; // to the REST api this reads geometry **contains** layer\r\n    return this;\r\n  },\r\n\r\n  // Returns a feature if any spatial relationship is found. Applies to all shape type combinations.\r\n  intersects: function (geometry) {\r\n    this._setGeometryParams(geometry);\r\n    this.params.spatialRel = 'esriSpatialRelIntersects';\r\n    return this;\r\n  },\r\n\r\n  // Returns a feature if its shape wholly contains the search geometry. Valid for all shape type combinations.\r\n  contains: function (geometry) {\r\n    this._setGeometryParams(geometry);\r\n    this.params.spatialRel = 'esriSpatialRelWithin'; // to the REST api this reads geometry **within** layer\r\n    return this;\r\n  },\r\n\r\n  // Returns a feature if the intersection of the interiors of the two shapes is not empty and has a lower dimension than the maximum dimension of the two shapes. Two lines that share an endpoint in common do not cross. Valid for Line/Line, Line/Area, Multi-point/Area, and Multi-point/Line shape type combinations.\r\n  crosses: function (geometry) {\r\n    this._setGeometryParams(geometry);\r\n    this.params.spatialRel = 'esriSpatialRelCrosses';\r\n    return this;\r\n  },\r\n\r\n  // Returns a feature if the two shapes share a common boundary. However, the intersection of the interiors of the two shapes must be empty. In the Point/Line case, the point may touch an endpoint only of the line. Applies to all combinations except Point/Point.\r\n  touches: function (geometry) {\r\n    this._setGeometryParams(geometry);\r\n    this.params.spatialRel = 'esriSpatialRelTouches';\r\n    return this;\r\n  },\r\n\r\n  // Returns a feature if the intersection of the two shapes results in an object of the same dimension, but different from both of the shapes. Applies to Area/Area, Line/Line, and Multi-point/Multi-point shape type combinations.\r\n  overlaps: function (geometry) {\r\n    this._setGeometryParams(geometry);\r\n    this.params.spatialRel = 'esriSpatialRelOverlaps';\r\n    return this;\r\n  },\r\n\r\n  // Returns a feature if the envelope of the two shapes intersects.\r\n  bboxIntersects: function (geometry) {\r\n    this._setGeometryParams(geometry);\r\n    this.params.spatialRel = 'esriSpatialRelEnvelopeIntersects';\r\n    return this;\r\n  },\r\n\r\n  // if someone can help decipher the ArcObjects explanation and translate to plain speak, we should mention this method in the doc\r\n  indexIntersects: function (geometry) {\r\n    this._setGeometryParams(geometry);\r\n    this.params.spatialRel = 'esriSpatialRelIndexIntersects'; // Returns a feature if the envelope of the query geometry intersects the index entry for the target geometry\r\n    return this;\r\n  },\r\n\r\n  // only valid for Feature Services running on ArcGIS Server 10.3+ or ArcGIS Online\r\n  nearby: function (latlng, radius) {\r\n    latlng = latLng(latlng);\r\n    this.params.geometry = [latlng.lng, latlng.lat];\r\n    this.params.geometryType = 'esriGeometryPoint';\r\n    this.params.spatialRel = 'esriSpatialRelIntersects';\r\n    this.params.units = 'esriSRUnit_Meter';\r\n    this.params.distance = radius;\r\n    this.params.inSr = 4326;\r\n    return this;\r\n  },\r\n\r\n  where: function (string) {\r\n    // instead of converting double-quotes to single quotes, pass as is, and provide a more informative message if a 400 is encountered\r\n    this.params.where = string;\r\n    return this;\r\n  },\r\n\r\n  between: function (start, end) {\r\n    this.params.time = [start.valueOf(), end.valueOf()];\r\n    return this;\r\n  },\r\n\r\n  simplify: function (map, factor) {\r\n    var mapWidth = Math.abs(map.getBounds().getWest() - map.getBounds().getEast());\r\n    this.params.maxAllowableOffset = (mapWidth / map.getSize().y) * factor;\r\n    return this;\r\n  },\r\n\r\n  orderBy: function (fieldName, order) {\r\n    order = order || 'ASC';\r\n    this.params.orderByFields = (this.params.orderByFields) ? this.params.orderByFields + ',' : '';\r\n    this.params.orderByFields += ([fieldName, order]).join(' ');\r\n    return this;\r\n  },\r\n\r\n  run: function (callback, context) {\r\n    this._cleanParams();\r\n\r\n    // services hosted on ArcGIS Online and ArcGIS Server 10.3.1+ support requesting geojson directly\r\n    if (this.options.isModern || isArcgisOnline(this.options.url)) {\r\n      this.params.f = 'geojson';\r\n\r\n      return this.request(function (error, response) {\r\n        this._trapSQLerrors(error);\r\n        callback.call(context, error, response, response);\r\n      }, this);\r\n\r\n    // otherwise convert it in the callback then pass it on\r\n    } else {\r\n      return this.request(function (error, response) {\r\n        this._trapSQLerrors(error);\r\n        callback.call(context, error, (response && responseToFeatureCollection(response)), response);\r\n      }, this);\r\n    }\r\n  },\r\n\r\n  count: function (callback, context) {\r\n    this._cleanParams();\r\n    this.params.returnCountOnly = true;\r\n    return this.request(function (error, response) {\r\n      callback.call(this, error, (response && response.count), response);\r\n    }, context);\r\n  },\r\n\r\n  ids: function (callback, context) {\r\n    this._cleanParams();\r\n    this.params.returnIdsOnly = true;\r\n    return this.request(function (error, response) {\r\n      callback.call(this, error, (response && response.objectIds), response);\r\n    }, context);\r\n  },\r\n\r\n  // only valid for Feature Services running on ArcGIS Server 10.3+ or ArcGIS Online\r\n  bounds: function (callback, context) {\r\n    this._cleanParams();\r\n    this.params.returnExtentOnly = true;\r\n    return this.request(function (error, response) {\r\n      if (response && response.extent && extentToBounds(response.extent)) {\r\n        callback.call(context, error, extentToBounds(response.extent), response);\r\n      } else {\r\n        error = {\r\n          message: 'Invalid Bounds'\r\n        };\r\n        callback.call(context, error, null, response);\r\n      }\r\n    }, context);\r\n  },\r\n\r\n  distinct: function () {\r\n    // geometry must be omitted for queries requesting distinct values\r\n    this.params.returnGeometry = false;\r\n    this.params.returnDistinctValues = true;\r\n    return this;\r\n  },\r\n\r\n  // only valid for image services\r\n  pixelSize: function (rawPoint) {\r\n    var castPoint = point(rawPoint);\r\n    this.params.pixelSize = [castPoint.x, castPoint.y];\r\n    return this;\r\n  },\r\n\r\n  // only valid for map services\r\n  layer: function (layer) {\r\n    this.path = layer + '/query';\r\n    return this;\r\n  },\r\n\r\n  _trapSQLerrors: function (error) {\r\n    if (error) {\r\n      if (error.code === '400') {\r\n        warn('one common syntax error in query requests is encasing string values in double quotes instead of single quotes');\r\n      }\r\n    }\r\n  },\r\n\r\n  _cleanParams: function () {\r\n    delete this.params.returnIdsOnly;\r\n    delete this.params.returnExtentOnly;\r\n    delete this.params.returnCountOnly;\r\n  },\r\n\r\n  _setGeometryParams: function (geometry) {\r\n    this.params.inSr = 4326;\r\n    var converted = _setGeometry(geometry);\r\n    this.params.geometry = converted.geometry;\r\n    this.params.geometryType = converted.geometryType;\r\n  }\r\n\r\n});\r\n\r\nexport function query (options) {\r\n  return new Query(options);\r\n}\r\n\r\nexport default query;\r\n","import { Task } from './Task';\r\nimport { responseToFeatureCollection } from '../Util';\r\n\r\nexport var Find = Task.extend({\r\n  setters: {\r\n    // method name > param name\r\n    'contains': 'contains',\r\n    'text': 'searchText',\r\n    'fields': 'searchFields', // denote an array or single string\r\n    'spatialReference': 'sr',\r\n    'sr': 'sr',\r\n    'layers': 'layers',\r\n    'returnGeometry': 'returnGeometry',\r\n    'maxAllowableOffset': 'maxAllowableOffset',\r\n    'precision': 'geometryPrecision',\r\n    'dynamicLayers': 'dynamicLayers',\r\n    'returnZ': 'returnZ',\r\n    'returnM': 'returnM',\r\n    'gdbVersion': 'gdbVersion',\r\n    // skipped implementing this (for now) because the REST service implementation isnt consistent between operations\r\n    // 'transform': 'datumTransformations',\r\n    'token': 'token'\r\n  },\r\n\r\n  path: 'find',\r\n\r\n  params: {\r\n    sr: 4326,\r\n    contains: true,\r\n    returnGeometry: true,\r\n    returnZ: true,\r\n    returnM: false\r\n  },\r\n\r\n  layerDefs: function (id, where) {\r\n    this.params.layerDefs = (this.params.layerDefs) ? this.params.layerDefs + ';' : '';\r\n    this.params.layerDefs += ([id, where]).join(':');\r\n    return this;\r\n  },\r\n\r\n  simplify: function (map, factor) {\r\n    var mapWidth = Math.abs(map.getBounds().getWest() - map.getBounds().getEast());\r\n    this.params.maxAllowableOffset = (mapWidth / map.getSize().y) * factor;\r\n    return this;\r\n  },\r\n\r\n  run: function (callback, context) {\r\n    return this.request(function (error, response) {\r\n      callback.call(context, error, (response && responseToFeatureCollection(response)), response);\r\n    }, context);\r\n  }\r\n});\r\n\r\nexport function find (options) {\r\n  return new Find(options);\r\n}\r\n\r\nexport default find;\r\n","import { Task } from './Task';\r\n\r\nexport var Identify = Task.extend({\r\n  path: 'identify',\r\n\r\n  between: function (start, end) {\r\n    this.params.time = [start.valueOf(), end.valueOf()];\r\n    return this;\r\n  }\r\n});\r\n\r\nexport function identify (options) {\r\n  return new Identify(options);\r\n}\r\n\r\nexport default identify;\r\n","import { latLng } from 'leaflet';\r\nimport { Identify } from './Identify';\r\nimport { responseToFeatureCollection,\r\n  boundsToExtent,\r\n  _setGeometry\r\n} from '../Util';\r\n\r\nexport var IdentifyFeatures = Identify.extend({\r\n  setters: {\r\n    'layers': 'layers',\r\n    'precision': 'geometryPrecision',\r\n    'tolerance': 'tolerance',\r\n    // skipped implementing this (for now) because the REST service implementation isnt consistent between operations.\r\n    // 'transform': 'datumTransformations'\r\n    'returnGeometry': 'returnGeometry'\r\n  },\r\n\r\n  params: {\r\n    sr: 4326,\r\n    layers: 'all',\r\n    tolerance: 3,\r\n    returnGeometry: true\r\n  },\r\n\r\n  on: function (map) {\r\n    var extent = boundsToExtent(map.getBounds());\r\n    var size = map.getSize();\r\n    this.params.imageDisplay = [size.x, size.y, 96];\r\n    this.params.mapExtent = [extent.xmin, extent.ymin, extent.xmax, extent.ymax];\r\n    return this;\r\n  },\r\n\r\n  at: function (geometry) {\r\n    // cast lat, long pairs in raw array form manually\r\n    if (geometry.length === 2) {\r\n      geometry = latLng(geometry);\r\n    }\r\n    this._setGeometryParams(geometry);\r\n    return this;\r\n  },\r\n\r\n  layerDef: function (id, where) {\r\n    this.params.layerDefs = (this.params.layerDefs) ? this.params.layerDefs + ';' : '';\r\n    this.params.layerDefs += ([id, where]).join(':');\r\n    return this;\r\n  },\r\n\r\n  simplify: function (map, factor) {\r\n    var mapWidth = Math.abs(map.getBounds().getWest() - map.getBounds().getEast());\r\n    this.params.maxAllowableOffset = (mapWidth / map.getSize().y) * factor;\r\n    return this;\r\n  },\r\n\r\n  run: function (callback, context) {\r\n    return this.request(function (error, response) {\r\n      // immediately invoke with an error\r\n      if (error) {\r\n        callback.call(context, error, undefined, response);\r\n        return;\r\n\r\n      // ok no error lets just assume we have features...\r\n      } else {\r\n        var featureCollection = responseToFeatureCollection(response);\r\n        response.results = response.results.reverse();\r\n        for (var i = 0; i < featureCollection.features.length; i++) {\r\n          var feature = featureCollection.features[i];\r\n          feature.layerId = response.results[i].layerId;\r\n        }\r\n        callback.call(context, undefined, featureCollection, response);\r\n      }\r\n    });\r\n  },\r\n\r\n  _setGeometryParams: function (geometry) {\r\n    var converted = _setGeometry(geometry);\r\n    this.params.geometry = converted.geometry;\r\n    this.params.geometryType = converted.geometryType;\r\n  }\r\n});\r\n\r\nexport function identifyFeatures (options) {\r\n  return new IdentifyFeatures(options);\r\n}\r\n\r\nexport default identifyFeatures;\r\n","import { latLng } from 'leaflet';\r\nimport { Identify } from './Identify';\r\nimport { responseToFeatureCollection } from '../Util';\r\n\r\nexport var IdentifyImage = Identify.extend({\r\n  setters: {\r\n    'setMosaicRule': 'mosaicRule',\r\n    'setRenderingRule': 'renderingRule',\r\n    'setPixelSize': 'pixelSize',\r\n    'returnCatalogItems': 'returnCatalogItems',\r\n    'returnGeometry': 'returnGeometry'\r\n  },\r\n\r\n  params: {\r\n    returnGeometry: false\r\n  },\r\n\r\n  at: function (latlng) {\r\n    latlng = latLng(latlng);\r\n    this.params.geometry = JSON.stringify({\r\n      x: latlng.lng,\r\n      y: latlng.lat,\r\n      spatialReference: {\r\n        wkid: 4326\r\n      }\r\n    });\r\n    this.params.geometryType = 'esriGeometryPoint';\r\n    return this;\r\n  },\r\n\r\n  getMosaicRule: function () {\r\n    return this.params.mosaicRule;\r\n  },\r\n\r\n  getRenderingRule: function () {\r\n    return this.params.renderingRule;\r\n  },\r\n\r\n  getPixelSize: function () {\r\n    return this.params.pixelSize;\r\n  },\r\n\r\n  run: function (callback, context) {\r\n    return this.request(function (error, response) {\r\n      callback.call(context, error, (response && this._responseToGeoJSON(response)), response);\r\n    }, this);\r\n  },\r\n\r\n  // get pixel data and return as geoJSON point\r\n  // populate catalog items (if any)\r\n  // merging in any catalogItemVisibilities as a propery of each feature\r\n  _responseToGeoJSON: function (response) {\r\n    var location = response.location;\r\n    var catalogItems = response.catalogItems;\r\n    var catalogItemVisibilities = response.catalogItemVisibilities;\r\n    var geoJSON = {\r\n      'pixel': {\r\n        'type': 'Feature',\r\n        'geometry': {\r\n          'type': 'Point',\r\n          'coordinates': [location.x, location.y]\r\n        },\r\n        'crs': {\r\n          'type': 'EPSG',\r\n          'properties': {\r\n            'code': location.spatialReference.wkid\r\n          }\r\n        },\r\n        'properties': {\r\n          'OBJECTID': response.objectId,\r\n          'name': response.name,\r\n          'value': response.value\r\n        },\r\n        'id': response.objectId\r\n      }\r\n    };\r\n\r\n    if (response.properties && response.properties.Values) {\r\n      geoJSON.pixel.properties.values = response.properties.Values;\r\n    }\r\n\r\n    if (catalogItems && catalogItems.features) {\r\n      geoJSON.catalogItems = responseToFeatureCollection(catalogItems);\r\n      if (catalogItemVisibilities && catalogItemVisibilities.length === geoJSON.catalogItems.features.length) {\r\n        for (var i = catalogItemVisibilities.length - 1; i >= 0; i--) {\r\n          geoJSON.catalogItems.features[i].properties.catalogItemVisibility = catalogItemVisibilities[i];\r\n        }\r\n      }\r\n    }\r\n    return geoJSON;\r\n  }\r\n\r\n});\r\n\r\nexport function identifyImage (params) {\r\n  return new IdentifyImage(params);\r\n}\r\n\r\nexport default identifyImage;\r\n","import { Util, Evented } from 'leaflet';\r\nimport {cors} from '../Support';\r\nimport {cleanUrl, getUrlParams} from '../Util';\r\nimport Request from '../Request';\r\n\r\nexport var Service = Evented.extend({\r\n\r\n  options: {\r\n    proxy: false,\r\n    useCors: cors,\r\n    timeout: 0\r\n  },\r\n\r\n  initialize: function (options) {\r\n    options = options || {};\r\n    this._requestQueue = [];\r\n    this._authenticating = false;\r\n    Util.setOptions(this, options);\r\n    this.options.url = cleanUrl(this.options.url);\r\n  },\r\n\r\n  get: function (path, params, callback, context) {\r\n    return this._request('get', path, params, callback, context);\r\n  },\r\n\r\n  post: function (path, params, callback, context) {\r\n    return this._request('post', path, params, callback, context);\r\n  },\r\n\r\n  request: function (path, params, callback, context) {\r\n    return this._request('request', path, params, callback, context);\r\n  },\r\n\r\n  metadata: function (callback, context) {\r\n    return this._request('get', '', {}, callback, context);\r\n  },\r\n\r\n  authenticate: function (token) {\r\n    this._authenticating = false;\r\n    this.options.token = token;\r\n    this._runQueue();\r\n    return this;\r\n  },\r\n\r\n  getTimeout: function () {\r\n    return this.options.timeout;\r\n  },\r\n\r\n  setTimeout: function (timeout) {\r\n    this.options.timeout = timeout;\r\n  },\r\n\r\n  _request: function (method, path, params, callback, context) {\r\n    this.fire('requeststart', {\r\n      url: this.options.url + path,\r\n      params: params,\r\n      method: method\r\n    }, true);\r\n\r\n    var wrappedCallback = this._createServiceCallback(method, path, params, callback, context);\r\n\r\n    if (this.options.token) {\r\n      params.token = this.options.token;\r\n    }\r\n    if (this.options.requestParams) {\r\n      Util.extend(params, this.options.requestParams);\r\n    }\r\n    if (this._authenticating) {\r\n      this._requestQueue.push([method, path, params, callback, context]);\r\n      return;\r\n    } else {\r\n      var url = (this.options.proxy) ? this.options.proxy + '?' + this.options.url + path : this.options.url + path;\r\n\r\n      if ((method === 'get' || method === 'request') && !this.options.useCors) {\r\n        return Request.get.JSONP(url, params, wrappedCallback, context);\r\n      } else {\r\n        return Request[method](url, params, wrappedCallback, context);\r\n      }\r\n    }\r\n  },\r\n\r\n  _createServiceCallback: function (method, path, params, callback, context) {\r\n    return Util.bind(function (error, response) {\r\n      if (error && (error.code === 499 || error.code === 498)) {\r\n        this._authenticating = true;\r\n\r\n        this._requestQueue.push([method, path, params, callback, context]);\r\n\r\n        // fire an event for users to handle and re-authenticate\r\n        this.fire('authenticationrequired', {\r\n          authenticate: Util.bind(this.authenticate, this)\r\n        }, true);\r\n\r\n        // if the user has access to a callback they can handle the auth error\r\n        error.authenticate = Util.bind(this.authenticate, this);\r\n      }\r\n\r\n      callback.call(context, error, response);\r\n\r\n      if (error) {\r\n        this.fire('requesterror', {\r\n          url: this.options.url + path,\r\n          params: params,\r\n          message: error.message,\r\n          code: error.code,\r\n          method: method\r\n        }, true);\r\n      } else {\r\n        this.fire('requestsuccess', {\r\n          url: this.options.url + path,\r\n          params: params,\r\n          response: response,\r\n          method: method\r\n        }, true);\r\n      }\r\n\r\n      this.fire('requestend', {\r\n        url: this.options.url + path,\r\n        params: params,\r\n        method: method\r\n      }, true);\r\n    }, this);\r\n  },\r\n\r\n  _runQueue: function () {\r\n    for (var i = this._requestQueue.length - 1; i >= 0; i--) {\r\n      var request = this._requestQueue[i];\r\n      var method = request.shift();\r\n      this[method].apply(this, request);\r\n    }\r\n    this._requestQueue = [];\r\n  }\r\n});\r\n\r\nexport function service (options) {\r\n  options = getUrlParams(options);\r\n  return new Service(options);\r\n}\r\n\r\nexport default service;\r\n","import { Service } from './Service';\r\nimport identifyFeatures from '../Tasks/IdentifyFeatures';\r\nimport query from '../Tasks/Query';\r\nimport find from '../Tasks/Find';\r\n\r\nexport var MapService = Service.extend({\r\n\r\n  identify: function () {\r\n    return identifyFeatures(this);\r\n  },\r\n\r\n  find: function () {\r\n    return find(this);\r\n  },\r\n\r\n  query: function () {\r\n    return query(this);\r\n  }\r\n\r\n});\r\n\r\nexport function mapService (options) {\r\n  return new MapService(options);\r\n}\r\n\r\nexport default mapService;\r\n","import { Service } from './Service';\r\nimport identifyImage from '../Tasks/IdentifyImage';\r\nimport query from '../Tasks/Query';\r\n\r\nexport var ImageService = Service.extend({\r\n\r\n  query: function () {\r\n    return query(this);\r\n  },\r\n\r\n  identify: function () {\r\n    return identifyImage(this);\r\n  }\r\n});\r\n\r\nexport function imageService (options) {\r\n  return new ImageService(options);\r\n}\r\n\r\nexport default imageService;\r\n","import { Service } from './Service';\r\nimport query from '../Tasks/Query';\r\nimport { geojsonToArcGIS } from '../Util';\r\n\r\nexport var FeatureLayerService = Service.extend({\r\n\r\n  options: {\r\n    idAttribute: 'OBJECTID'\r\n  },\r\n\r\n  query: function () {\r\n    return query(this);\r\n  },\r\n\r\n  addFeature: function (feature, callback, context) {\r\n    this.addFeatures(feature, callback, context);\r\n  },\r\n\r\n  addFeatures: function (features, callback, context) {\r\n    var featuresArray = features.features ? features.features : [features];\r\n    for (var i = featuresArray.length - 1; i >= 0; i--) {\r\n      delete featuresArray[i].id;\r\n    }\r\n    features = geojsonToArcGIS(features);\r\n    features = featuresArray.length > 1 ? features : [features];\r\n    return this.post('addFeatures', {\r\n      features: features\r\n    }, function (error, response) {\r\n      // For compatibility reason with former addFeature function,\r\n      // we return the object in the array and not the array itself\r\n      var result = (response && response.addResults) ? response.addResults.length > 1 ? response.addResults : response.addResults[0] : undefined;\r\n      if (callback) {\r\n        callback.call(context, error || response.addResults[0].error, result);\r\n      }\r\n    }, context);\r\n  },\r\n\r\n  updateFeature: function (feature, callback, context) {\r\n    this.updateFeatures(feature, callback, context);\r\n  },\r\n\r\n  updateFeatures: function (features, callback, context) {\r\n    var featuresArray = features.features ? features.features : [features];\r\n    features = geojsonToArcGIS(features, this.options.idAttribute);\r\n    features = featuresArray.length > 1 ? features : [features];\r\n\r\n    return this.post('updateFeatures', {\r\n      features: features\r\n    }, function (error, response) {\r\n      // For compatibility reason with former updateFeature function,\r\n      // we return the object in the array and not the array itself\r\n      var result = (response && response.updateResults) ? response.updateResults.length > 1 ? response.updateResults : response.updateResults[0] : undefined;\r\n      if (callback) {\r\n        callback.call(context, error || response.updateResults[0].error, result);\r\n      }\r\n    }, context);\r\n  },\r\n\r\n  deleteFeature: function (id, callback, context) {\r\n    this.deleteFeatures(id, callback, context);\r\n  },\r\n\r\n  deleteFeatures: function (ids, callback, context) {\r\n    return this.post('deleteFeatures', {\r\n      objectIds: ids\r\n    }, function (error, response) {\r\n      // For compatibility reason with former deleteFeature function,\r\n      // we return the object in the array and not the array itself\r\n      var result = (response && response.deleteResults) ? response.deleteResults.length > 1 ? response.deleteResults : response.deleteResults[0] : undefined;\r\n      if (callback) {\r\n        callback.call(context, error || response.deleteResults[0].error, result);\r\n      }\r\n    }, context);\r\n  }\r\n});\r\n\r\nexport function featureLayerService (options) {\r\n  return new FeatureLayerService(options);\r\n}\r\n\r\nexport default featureLayerService;\r\n","import { TileLayer, Util } from 'leaflet';\r\nimport { pointerEvents } from '../Support';\r\nimport { request } from '../Request';\r\nimport {\r\n  setEsriAttribution,\r\n  _getAttributionData,\r\n  _updateMapAttribution\r\n} from '../Util';\r\n\r\nvar tileProtocol = (window.location.protocol !== 'https:') ? 'http:' : 'https:';\r\n\r\nexport var BasemapLayer = TileLayer.extend({\r\n  statics: {\r\n    TILES: {\r\n      Streets: {\r\n        urlTemplate: tileProtocol + '//{s}.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer/tile/{z}/{y}/{x}',\r\n        options: {\r\n          minZoom: 1,\r\n          maxZoom: 19,\r\n          subdomains: ['server', 'services'],\r\n          attribution: 'USGS, NOAA',\r\n          attributionUrl: 'https://static.arcgis.com/attribution/World_Street_Map'\r\n        }\r\n      },\r\n      Topographic: {\r\n        urlTemplate: tileProtocol + '//{s}.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer/tile/{z}/{y}/{x}',\r\n        options: {\r\n          minZoom: 1,\r\n          maxZoom: 19,\r\n          subdomains: ['server', 'services'],\r\n          attribution: 'USGS, NOAA',\r\n          attributionUrl: 'https://static.arcgis.com/attribution/World_Topo_Map'\r\n        }\r\n      },\r\n      Oceans: {\r\n        urlTemplate: tileProtocol + '//{s}.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer/tile/{z}/{y}/{x}',\r\n        options: {\r\n          minZoom: 1,\r\n          maxZoom: 16,\r\n          subdomains: ['server', 'services'],\r\n          attribution: 'USGS, NOAA',\r\n          attributionUrl: 'https://static.arcgis.com/attribution/Ocean_Basemap'\r\n        }\r\n      },\r\n      OceansLabels: {\r\n        urlTemplate: tileProtocol + '//{s}.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer/tile/{z}/{y}/{x}',\r\n        options: {\r\n          minZoom: 1,\r\n          maxZoom: 16,\r\n          subdomains: ['server', 'services'],\r\n          pane: (pointerEvents) ? 'esri-labels' : 'tilePane',\r\n          attribution: ''\r\n        }\r\n      },\r\n      NationalGeographic: {\r\n        urlTemplate: tileProtocol + '//{s}.arcgisonline.com/ArcGIS/rest/services/NatGeo_World_Map/MapServer/tile/{z}/{y}/{x}',\r\n        options: {\r\n          minZoom: 1,\r\n          maxZoom: 16,\r\n          subdomains: ['server', 'services'],\r\n          attribution: 'National Geographic, DeLorme, HERE, UNEP-WCMC, USGS, NASA, ESA, METI, NRCAN, GEBCO, NOAA, increment P Corp.'\r\n        }\r\n      },\r\n      DarkGray: {\r\n        urlTemplate: tileProtocol + '//{s}.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Base/MapServer/tile/{z}/{y}/{x}',\r\n        options: {\r\n          minZoom: 1,\r\n          maxZoom: 16,\r\n          subdomains: ['server', 'services'],\r\n          attribution: 'HERE, DeLorme, MapmyIndia, &copy; OpenStreetMap contributors'\r\n        }\r\n      },\r\n      DarkGrayLabels: {\r\n        urlTemplate: tileProtocol + '//{s}.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Reference/MapServer/tile/{z}/{y}/{x}',\r\n        options: {\r\n          minZoom: 1,\r\n          maxZoom: 16,\r\n          subdomains: ['server', 'services'],\r\n          pane: (pointerEvents) ? 'esri-labels' : 'tilePane',\r\n          attribution: ''\r\n\r\n        }\r\n      },\r\n      Gray: {\r\n        urlTemplate: tileProtocol + '//{s}.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer/tile/{z}/{y}/{x}',\r\n        options: {\r\n          minZoom: 1,\r\n          maxZoom: 16,\r\n          subdomains: ['server', 'services'],\r\n          attribution: 'HERE, DeLorme, MapmyIndia, &copy; OpenStreetMap contributors'\r\n        }\r\n      },\r\n      GrayLabels: {\r\n        urlTemplate: tileProtocol + '//{s}.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Reference/MapServer/tile/{z}/{y}/{x}',\r\n        options: {\r\n          minZoom: 1,\r\n          maxZoom: 16,\r\n          subdomains: ['server', 'services'],\r\n          pane: (pointerEvents) ? 'esri-labels' : 'tilePane',\r\n          attribution: ''\r\n        }\r\n      },\r\n      Imagery: {\r\n        urlTemplate: tileProtocol + '//{s}.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}',\r\n        options: {\r\n          minZoom: 1,\r\n          maxZoom: 22,\r\n          maxNativeZoom: 22,\r\n          downsampled: false,\r\n          subdomains: ['server', 'services'],\r\n          attribution: 'DigitalGlobe, GeoEye, i-cubed, USDA, USGS, AEX, Getmapping, Aerogrid, IGN, IGP, swisstopo, and the GIS User Community',\r\n          attributionUrl: 'https://static.arcgis.com/attribution/World_Imagery'\r\n        }\r\n      },\r\n      ImageryLabels: {\r\n        urlTemplate: tileProtocol + '//{s}.arcgisonline.com/ArcGIS/rest/services/Reference/World_Boundaries_and_Places/MapServer/tile/{z}/{y}/{x}',\r\n        options: {\r\n          minZoom: 1,\r\n          maxZoom: 19,\r\n          subdomains: ['server', 'services'],\r\n          pane: (pointerEvents) ? 'esri-labels' : 'tilePane',\r\n          attribution: ''\r\n        }\r\n      },\r\n      ImageryTransportation: {\r\n        urlTemplate: tileProtocol + '//{s}.arcgisonline.com/ArcGIS/rest/services/Reference/World_Transportation/MapServer/tile/{z}/{y}/{x}',\r\n        options: {\r\n          minZoom: 1,\r\n          maxZoom: 19,\r\n          subdomains: ['server', 'services'],\r\n          pane: (pointerEvents) ? 'esri-labels' : 'tilePane',\r\n          attribution: ''\r\n        }\r\n      },\r\n      ShadedRelief: {\r\n        urlTemplate: tileProtocol + '//{s}.arcgisonline.com/ArcGIS/rest/services/World_Shaded_Relief/MapServer/tile/{z}/{y}/{x}',\r\n        options: {\r\n          minZoom: 1,\r\n          maxZoom: 13,\r\n          subdomains: ['server', 'services'],\r\n          attribution: 'USGS'\r\n        }\r\n      },\r\n      ShadedReliefLabels: {\r\n        urlTemplate: tileProtocol + '//{s}.arcgisonline.com/ArcGIS/rest/services/Reference/World_Boundaries_and_Places_Alternate/MapServer/tile/{z}/{y}/{x}',\r\n        options: {\r\n          minZoom: 1,\r\n          maxZoom: 12,\r\n          subdomains: ['server', 'services'],\r\n          pane: (pointerEvents) ? 'esri-labels' : 'tilePane',\r\n          attribution: ''\r\n        }\r\n      },\r\n      Terrain: {\r\n        urlTemplate: tileProtocol + '//{s}.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer/tile/{z}/{y}/{x}',\r\n        options: {\r\n          minZoom: 1,\r\n          maxZoom: 13,\r\n          subdomains: ['server', 'services'],\r\n          attribution: 'USGS, NOAA'\r\n        }\r\n      },\r\n      TerrainLabels: {\r\n        urlTemplate: tileProtocol + '//{s}.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer/tile/{z}/{y}/{x}',\r\n        options: {\r\n          minZoom: 1,\r\n          maxZoom: 13,\r\n          subdomains: ['server', 'services'],\r\n          pane: (pointerEvents) ? 'esri-labels' : 'tilePane',\r\n          attribution: ''\r\n        }\r\n      },\r\n      USATopo: {\r\n        urlTemplate: tileProtocol + '//{s}.arcgisonline.com/ArcGIS/rest/services/USA_Topo_Maps/MapServer/tile/{z}/{y}/{x}',\r\n        options: {\r\n          minZoom: 1,\r\n          maxZoom: 15,\r\n          subdomains: ['server', 'services'],\r\n          attribution: 'USGS, National Geographic Society, i-cubed'\r\n        }\r\n      },\r\n      ImageryClarity: {\r\n        urlTemplate: tileProtocol + '//clarity.maptiles.arcgis.com/arcgis/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}',\r\n        options: {\r\n          minZoom: 1,\r\n          maxZoom: 19,\r\n          attribution: 'Esri, DigitalGlobe, GeoEye, Earthstar Geographics, CNES/Airbus DS, USDA, USGS, AeroGRID, IGN, and the GIS User Community'\r\n        }\r\n      },\r\n      Physical: {\r\n        urlTemplate: tileProtocol + '//{s}.arcgisonline.com/arcgis/rest/services/World_Physical_Map/MapServer/tile/{z}/{y}/{x}',\r\n        options: {\r\n          minZoom: 1,\r\n          maxZoom: 8,\r\n          subdomains: ['server', 'services'],\r\n          attribution: 'U.S. National Park Service'\r\n        }\r\n      },\r\n      ImageryFirefly: {\r\n        urlTemplate: tileProtocol + '//fly.maptiles.arcgis.com/arcgis/rest/services/World_Imagery_Firefly/MapServer/tile/{z}/{y}/{x}',\r\n        options: {\r\n          minZoom: 1,\r\n          maxZoom: 19,\r\n          attribution: 'Esri, DigitalGlobe, GeoEye, Earthstar Geographics, CNES/Airbus DS, USDA, USGS, AeroGRID, IGN, and the GIS User Community',\r\n          attributionUrl: 'https://static.arcgis.com/attribution/World_Imagery'\r\n        }\r\n      }\r\n    }\r\n  },\r\n\r\n  initialize: function (key, options) {\r\n    var config;\r\n\r\n    // set the config variable with the appropriate config object\r\n    if (typeof key === 'object' && key.urlTemplate && key.options) {\r\n      config = key;\r\n    } else if (typeof key === 'string' && BasemapLayer.TILES[key]) {\r\n      config = BasemapLayer.TILES[key];\r\n    } else {\r\n      throw new Error('L.esri.BasemapLayer: Invalid parameter. Use one of \"Streets\", \"Topographic\", \"Oceans\", \"OceansLabels\", \"NationalGeographic\", \"Physical\", \"Gray\", \"GrayLabels\", \"DarkGray\", \"DarkGrayLabels\", \"Imagery\", \"ImageryLabels\", \"ImageryTransportation\", \"ImageryClarity\", \"ImageryFirefly\", ShadedRelief\", \"ShadedReliefLabels\", \"Terrain\", \"TerrainLabels\" or \"USATopo\"');\r\n    }\r\n\r\n    // merge passed options into the config options\r\n    var tileOptions = Util.extend(config.options, options);\r\n\r\n    Util.setOptions(this, tileOptions);\r\n\r\n    if (this.options.token && config.urlTemplate.indexOf('token=') === -1) {\r\n      config.urlTemplate += ('?token=' + this.options.token);\r\n    }\r\n    if (this.options.proxy) {\r\n      config.urlTemplate = this.options.proxy + '?' + config.urlTemplate;\r\n    }\r\n\r\n    // call the initialize method on L.TileLayer to set everything up\r\n    TileLayer.prototype.initialize.call(this, config.urlTemplate, tileOptions);\r\n  },\r\n\r\n  onAdd: function (map) {\r\n    // include 'Powered by Esri' in map attribution\r\n    setEsriAttribution(map);\r\n\r\n    if (this.options.pane === 'esri-labels') {\r\n      this._initPane();\r\n    }\r\n    // some basemaps can supply dynamic attribution\r\n    if (this.options.attributionUrl) {\r\n      _getAttributionData((this.options.proxy ? this.options.proxy + '?' : '') + this.options.attributionUrl, map);\r\n    }\r\n\r\n    map.on('moveend', _updateMapAttribution);\r\n\r\n    // Esri World Imagery is cached all the way to zoom 22 in select regions\r\n    if (this._url.indexOf('World_Imagery') !== -1) {\r\n      map.on('zoomanim', _fetchTilemap, this);\r\n    }\r\n\r\n    TileLayer.prototype.onAdd.call(this, map);\r\n  },\r\n\r\n  onRemove: function (map) {\r\n    map.off('moveend', _updateMapAttribution);\r\n    TileLayer.prototype.onRemove.call(this, map);\r\n  },\r\n\r\n  _initPane: function () {\r\n    if (!this._map.getPane(this.options.pane)) {\r\n      var pane = this._map.createPane(this.options.pane);\r\n      pane.style.pointerEvents = 'none';\r\n      pane.style.zIndex = 500;\r\n    }\r\n  },\r\n\r\n  getAttribution: function () {\r\n    if (this.options.attribution) {\r\n      var attribution = '<span class=\"esri-dynamic-attribution\">' + this.options.attribution + '</span>';\r\n    }\r\n    return attribution;\r\n  }\r\n});\r\n\r\nfunction _fetchTilemap (evt) {\r\n  var map = evt.target;\r\n  if (!map) { return; }\r\n\r\n  var oldZoom = map.getZoom();\r\n  var newZoom = evt.zoom;\r\n  var newCenter = map.wrapLatLng(evt.center);\r\n\r\n  if (newZoom > oldZoom && newZoom > 13 && !this.options.downsampled) {\r\n    // convert wrapped lat/long into tile coordinates and use them to generate the tilemap url\r\n    var tilePoint = map.project(newCenter, newZoom).divideBy(256).floor();\r\n\r\n    // use new coords to determine the tilemap url\r\n    var tileUrl = Util.template(this._url, Util.extend({\r\n      s: this._getSubdomain(tilePoint),\r\n      x: tilePoint.x,\r\n      y: tilePoint.y,\r\n      z: newZoom\r\n    }, this.options));\r\n\r\n    // 8x8 grids are cached\r\n    var tilemapUrl = tileUrl.replace(/tile/, 'tilemap') + '/8/8';\r\n\r\n    // an array of booleans in the response indicate missing tiles\r\n    request(tilemapUrl, {}, function (err, response) {\r\n      if (!err) {\r\n        for (var i = 0; i < response.data.length; i++) {\r\n          if (!response.data[i]) {\r\n            // if necessary, resample a lower zoom\r\n            this.options.maxNativeZoom = newZoom - 1;\r\n            this.options.downsampled = true;\r\n            break;\r\n          }\r\n          // if no tiles are missing, reset the original maxZoom\r\n          this.options.maxNativeZoom = 22;\r\n        }\r\n      }\r\n    }, this);\r\n  } else if (newZoom < 13) {\r\n    // if the user moves to a new region, time for a fresh test\r\n    this.options.downsampled = false;\r\n  }\r\n}\r\n\r\nexport function basemapLayer (key, options) {\r\n  return new BasemapLayer(key, options);\r\n}\r\n\r\nexport default basemapLayer;\r\n","import { CRS, DomEvent, TileLayer, Util } from 'leaflet';\r\nimport { warn, getUrlParams, setEsriAttribution } from '../Util';\r\nimport mapService from '../Services/MapService';\r\n\r\nexport var TiledMapLayer = TileLayer.extend({\r\n  options: {\r\n    zoomOffsetAllowance: 0.1,\r\n    errorTileUrl: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEABAMAAACuXLVVAAAAA1BMVEUzNDVszlHHAAAAAXRSTlMAQObYZgAAAAlwSFlzAAAAAAAAAAAB6mUWpAAAADZJREFUeJztwQEBAAAAgiD/r25IQAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA7waBAAABw08RwAAAAABJRU5ErkJggg=='\r\n  },\r\n\r\n  statics: {\r\n    MercatorZoomLevels: {\r\n      '0': 156543.03392799999,\r\n      '1': 78271.516963999893,\r\n      '2': 39135.758482000099,\r\n      '3': 19567.879240999901,\r\n      '4': 9783.9396204999593,\r\n      '5': 4891.9698102499797,\r\n      '6': 2445.9849051249898,\r\n      '7': 1222.9924525624899,\r\n      '8': 611.49622628138002,\r\n      '9': 305.74811314055802,\r\n      '10': 152.874056570411,\r\n      '11': 76.437028285073197,\r\n      '12': 38.218514142536598,\r\n      '13': 19.109257071268299,\r\n      '14': 9.5546285356341496,\r\n      '15': 4.7773142679493699,\r\n      '16': 2.38865713397468,\r\n      '17': 1.1943285668550501,\r\n      '18': 0.59716428355981699,\r\n      '19': 0.29858214164761698,\r\n      '20': 0.14929107082381,\r\n      '21': 0.07464553541191,\r\n      '22': 0.0373227677059525,\r\n      '23': 0.0186613838529763\r\n    }\r\n  },\r\n\r\n  initialize: function (options) {\r\n    options = Util.setOptions(this, options);\r\n\r\n    // set the urls\r\n    options = getUrlParams(options);\r\n    this.tileUrl = (options.proxy ? options.proxy + '?' : '') + options.url + 'tile/{z}/{y}/{x}' + (options.requestParams && Object.keys(options.requestParams).length > 0 ? Util.getParamString(options.requestParams) : '');\r\n    // Remove subdomain in url\r\n    // https://github.com/Esri/esri-leaflet/issues/991\r\n    if (options.url.indexOf('{s}') !== -1 && options.subdomains) {\r\n      options.url = options.url.replace('{s}', options.subdomains[0]);\r\n    }\r\n    this.service = mapService(options);\r\n    this.service.addEventParent(this);\r\n\r\n    var arcgisonline = new RegExp(/tiles.arcgis(online)?\\.com/g);\r\n    if (arcgisonline.test(options.url)) {\r\n      this.tileUrl = this.tileUrl.replace('://tiles', '://tiles{s}');\r\n      options.subdomains = ['1', '2', '3', '4'];\r\n    }\r\n\r\n    if (this.options.token) {\r\n      this.tileUrl += ('?token=' + this.options.token);\r\n    }\r\n\r\n    // init layer by calling TileLayers initialize method\r\n    TileLayer.prototype.initialize.call(this, this.tileUrl, options);\r\n  },\r\n\r\n  getTileUrl: function (tilePoint) {\r\n    var zoom = this._getZoomForUrl();\r\n\r\n    return Util.template(this.tileUrl, Util.extend({\r\n      s: this._getSubdomain(tilePoint),\r\n      x: tilePoint.x,\r\n      y: tilePoint.y,\r\n      // try lod map first, then just default to zoom level\r\n      z: (this._lodMap && this._lodMap[zoom]) ? this._lodMap[zoom] : zoom\r\n    }, this.options));\r\n  },\r\n\r\n  createTile: function (coords, done) {\r\n    var tile = document.createElement('img');\r\n\r\n    DomEvent.on(tile, 'load', Util.bind(this._tileOnLoad, this, done, tile));\r\n    DomEvent.on(tile, 'error', Util.bind(this._tileOnError, this, done, tile));\r\n\r\n    if (this.options.crossOrigin) {\r\n      tile.crossOrigin = '';\r\n    }\r\n\r\n    /*\r\n     Alt tag is set to empty string to keep screen readers from reading URL and for compliance reasons\r\n     http://www.w3.org/TR/WCAG20-TECHS/H67\r\n    */\r\n    tile.alt = '';\r\n\r\n    // if there is no lod map or an lod map with a proper zoom load the tile\r\n    // otherwise wait for the lod map to become available\r\n    if (!this._lodMap || (this._lodMap && this._lodMap[this._getZoomForUrl()])) {\r\n      tile.src = this.getTileUrl(coords);\r\n    } else {\r\n      this.once('lodmap', function () {\r\n        tile.src = this.getTileUrl(coords);\r\n      }, this);\r\n    }\r\n\r\n    return tile;\r\n  },\r\n\r\n  onAdd: function (map) {\r\n    // include 'Powered by Esri' in map attribution\r\n    setEsriAttribution(map);\r\n\r\n    if (!this._lodMap) {\r\n      this.metadata(function (error, metadata) {\r\n        if (!error && metadata.spatialReference) {\r\n          var sr = metadata.spatialReference.latestWkid || metadata.spatialReference.wkid;\r\n          // display the copyright text from the service using leaflet's attribution control\r\n          if (!this.options.attribution && map.attributionControl && metadata.copyrightText) {\r\n            this.options.attribution = metadata.copyrightText;\r\n            map.attributionControl.addAttribution(this.getAttribution());\r\n          }\r\n\r\n          // if the service tiles were published in web mercator using conventional LODs but missing levels, we can try and remap them\r\n          if (map.options.crs === CRS.EPSG3857 && (sr === 102100 || sr === 3857)) {\r\n            this._lodMap = {};\r\n            // create the zoom level data\r\n            var arcgisLODs = metadata.tileInfo.lods;\r\n            var correctResolutions = TiledMapLayer.MercatorZoomLevels;\r\n\r\n            for (var i = 0; i < arcgisLODs.length; i++) {\r\n              var arcgisLOD = arcgisLODs[i];\r\n              for (var ci in correctResolutions) {\r\n                var correctRes = correctResolutions[ci];\r\n\r\n                if (this._withinPercentage(arcgisLOD.resolution, correctRes, this.options.zoomOffsetAllowance)) {\r\n                  this._lodMap[ci] = arcgisLOD.level;\r\n                  break;\r\n                }\r\n              }\r\n            }\r\n\r\n            this.fire('lodmap');\r\n          } else if (map.options.crs && map.options.crs.code && (map.options.crs.code.indexOf(sr) > -1)) {\r\n            // if the projection is WGS84, or the developer is using Proj4 to define a custom CRS, no action is required\r\n          } else {\r\n            // if the service was cached in a custom projection and an appropriate LOD hasn't been defined in the map, guide the developer to our Proj4 sample\r\n            warn('L.esri.TiledMapLayer is using a non-mercator spatial reference. Support may be available through Proj4Leaflet http://esri.github.io/esri-leaflet/examples/non-mercator-projection.html');\r\n          }\r\n        }\r\n      }, this);\r\n    }\r\n\r\n    TileLayer.prototype.onAdd.call(this, map);\r\n  },\r\n\r\n  metadata: function (callback, context) {\r\n    this.service.metadata(callback, context);\r\n    return this;\r\n  },\r\n\r\n  identify: function () {\r\n    return this.service.identify();\r\n  },\r\n\r\n  find: function () {\r\n    return this.service.find();\r\n  },\r\n\r\n  query: function () {\r\n    return this.service.query();\r\n  },\r\n\r\n  authenticate: function (token) {\r\n    var tokenQs = '?token=' + token;\r\n    this.tileUrl = (this.options.token) ? this.tileUrl.replace(/\\?token=(.+)/g, tokenQs) : this.tileUrl + tokenQs;\r\n    this.options.token = token;\r\n    this.service.authenticate(token);\r\n    return this;\r\n  },\r\n\r\n  _withinPercentage: function (a, b, percentage) {\r\n    var diff = Math.abs((a / b) - 1);\r\n    return diff < percentage;\r\n  }\r\n});\r\n\r\nexport function tiledMapLayer (url, options) {\r\n  return new TiledMapLayer(url, options);\r\n}\r\n\r\nexport default tiledMapLayer;\r\n","import { ImageOverlay, CRS, DomUtil, Util, Layer, popup, latLng, bounds } from 'leaflet';\r\nimport { cors } from '../Support';\r\nimport { setEsriAttribution } from '../Util';\r\n\r\nvar Overlay = ImageOverlay.extend({\r\n  onAdd: function (map) {\r\n    this._topLeft = map.getPixelBounds().min;\r\n    ImageOverlay.prototype.onAdd.call(this, map);\r\n  },\r\n  _reset: function () {\r\n    if (this._map.options.crs === CRS.EPSG3857) {\r\n      ImageOverlay.prototype._reset.call(this);\r\n    } else {\r\n      DomUtil.setPosition(this._image, this._topLeft.subtract(this._map.getPixelOrigin()));\r\n    }\r\n  }\r\n});\r\n\r\nexport var RasterLayer = Layer.extend({\r\n  options: {\r\n    opacity: 1,\r\n    position: 'front',\r\n    f: 'image',\r\n    useCors: cors,\r\n    attribution: null,\r\n    interactive: false,\r\n    alt: ''\r\n  },\r\n\r\n  onAdd: function (map) {\r\n    // include 'Powered by Esri' in map attribution\r\n    setEsriAttribution(map);\r\n\r\n    if (this.options.zIndex) {\r\n      this.options.position = null;\r\n    }\r\n\r\n    this._update = Util.throttle(this._update, this.options.updateInterval, this);\r\n\r\n    map.on('moveend', this._update, this);\r\n\r\n    // if we had an image loaded and it matches the\r\n    // current bounds show the image otherwise remove it\r\n    if (this._currentImage && this._currentImage._bounds.equals(this._map.getBounds())) {\r\n      map.addLayer(this._currentImage);\r\n    } else if (this._currentImage) {\r\n      this._map.removeLayer(this._currentImage);\r\n      this._currentImage = null;\r\n    }\r\n\r\n    this._update();\r\n\r\n    if (this._popup) {\r\n      this._map.on('click', this._getPopupData, this);\r\n      this._map.on('dblclick', this._resetPopupState, this);\r\n    }\r\n\r\n    // add copyright text listed in service metadata\r\n    this.metadata(function (err, metadata) {\r\n      if (!err && !this.options.attribution && map.attributionControl && metadata.copyrightText) {\r\n        this.options.attribution = metadata.copyrightText;\r\n        map.attributionControl.addAttribution(this.getAttribution());\r\n      }\r\n    }, this);\r\n  },\r\n\r\n  onRemove: function (map) {\r\n    if (this._currentImage) {\r\n      this._map.removeLayer(this._currentImage);\r\n    }\r\n\r\n    if (this._popup) {\r\n      this._map.off('click', this._getPopupData, this);\r\n      this._map.off('dblclick', this._resetPopupState, this);\r\n    }\r\n\r\n    this._map.off('moveend', this._update, this);\r\n  },\r\n\r\n  bindPopup: function (fn, popupOptions) {\r\n    this._shouldRenderPopup = false;\r\n    this._lastClick = false;\r\n    this._popup = popup(popupOptions);\r\n    this._popupFunction = fn;\r\n    if (this._map) {\r\n      this._map.on('click', this._getPopupData, this);\r\n      this._map.on('dblclick', this._resetPopupState, this);\r\n    }\r\n    return this;\r\n  },\r\n\r\n  unbindPopup: function () {\r\n    if (this._map) {\r\n      this._map.closePopup(this._popup);\r\n      this._map.off('click', this._getPopupData, this);\r\n      this._map.off('dblclick', this._resetPopupState, this);\r\n    }\r\n    this._popup = false;\r\n    return this;\r\n  },\r\n\r\n  bringToFront: function () {\r\n    this.options.position = 'front';\r\n    if (this._currentImage) {\r\n      this._currentImage.bringToFront();\r\n      this._setAutoZIndex(Math.max);\r\n    }\r\n    return this;\r\n  },\r\n\r\n  bringToBack: function () {\r\n    this.options.position = 'back';\r\n    if (this._currentImage) {\r\n      this._currentImage.bringToBack();\r\n      this._setAutoZIndex(Math.min);\r\n    }\r\n    return this;\r\n  },\r\n\r\n  setZIndex: function (value) {\r\n    this.options.zIndex = value;\r\n    if (this._currentImage) {\r\n      this._currentImage.setZIndex(value);\r\n    }\r\n    return this;\r\n  },\r\n\r\n  _setAutoZIndex: function (compare) {\r\n    // go through all other layers of the same pane, set zIndex to max + 1 (front) or min - 1 (back)\r\n    if (!this._currentImage) {\r\n      return;\r\n    }\r\n    var layers = this._currentImage.getPane().children;\r\n    var edgeZIndex = -compare(-Infinity, Infinity); // -Infinity for max, Infinity for min\r\n    for (var i = 0, len = layers.length, zIndex; i < len; i++) {\r\n      zIndex = layers[i].style.zIndex;\r\n      if (layers[i] !== this._currentImage._image && zIndex) {\r\n        edgeZIndex = compare(edgeZIndex, +zIndex);\r\n      }\r\n    }\r\n\r\n    if (isFinite(edgeZIndex)) {\r\n      this.options.zIndex = edgeZIndex + compare(-1, 1);\r\n      this.setZIndex(this.options.zIndex);\r\n    }\r\n  },\r\n\r\n  getAttribution: function () {\r\n    return this.options.attribution;\r\n  },\r\n\r\n  getOpacity: function () {\r\n    return this.options.opacity;\r\n  },\r\n\r\n  setOpacity: function (opacity) {\r\n    this.options.opacity = opacity;\r\n    if (this._currentImage) {\r\n      this._currentImage.setOpacity(opacity);\r\n    }\r\n    return this;\r\n  },\r\n\r\n  getTimeRange: function () {\r\n    return [this.options.from, this.options.to];\r\n  },\r\n\r\n  setTimeRange: function (from, to) {\r\n    this.options.from = from;\r\n    this.options.to = to;\r\n    this._update();\r\n    return this;\r\n  },\r\n\r\n  metadata: function (callback, context) {\r\n    this.service.metadata(callback, context);\r\n    return this;\r\n  },\r\n\r\n  authenticate: function (token) {\r\n    this.service.authenticate(token);\r\n    return this;\r\n  },\r\n\r\n  redraw: function () {\r\n    this._update();\r\n  },\r\n\r\n  _renderImage: function (url, bounds, contentType) {\r\n    if (this._map) {\r\n      // if no output directory has been specified for a service, MIME data will be returned\r\n      if (contentType) {\r\n        url = 'data:' + contentType + ';base64,' + url;\r\n      }\r\n\r\n      // if server returns an inappropriate response, abort.\r\n      if (!url) return;\r\n\r\n      // create a new image overlay and add it to the map\r\n      // to start loading the image\r\n      // opacity is 0 while the image is loading\r\n      var image = new Overlay(url, bounds, {\r\n        opacity: 0,\r\n        crossOrigin: this.options.useCors,\r\n        alt: this.options.alt,\r\n        pane: this.options.pane || this.getPane(),\r\n        interactive: this.options.interactive\r\n      }).addTo(this._map);\r\n\r\n      var onOverlayError = function () {\r\n        this._map.removeLayer(image);\r\n        this.fire('error');\r\n        image.off('load', onOverlayLoad, this);\r\n      };\r\n\r\n      var onOverlayLoad = function (e) {\r\n        image.off('error', onOverlayLoad, this);\r\n        if (this._map) {\r\n          var newImage = e.target;\r\n          var oldImage = this._currentImage;\r\n\r\n          // if the bounds of this image matches the bounds that\r\n          // _renderImage was called with and we have a map with the same bounds\r\n          // hide the old image if there is one and set the opacity\r\n          // of the new image otherwise remove the new image\r\n          if (newImage._bounds.equals(bounds) && newImage._bounds.equals(this._map.getBounds())) {\r\n            this._currentImage = newImage;\r\n\r\n            if (this.options.position === 'front') {\r\n              this.bringToFront();\r\n            } else if (this.options.position === 'back') {\r\n              this.bringToBack();\r\n            }\r\n\r\n            if (this.options.zIndex) {\r\n              this.setZIndex(this.options.zIndex);\r\n            }\r\n\r\n            if (this._map && this._currentImage._map) {\r\n              this._currentImage.setOpacity(this.options.opacity);\r\n            } else {\r\n              this._currentImage._map.removeLayer(this._currentImage);\r\n            }\r\n\r\n            if (oldImage && this._map) {\r\n              this._map.removeLayer(oldImage);\r\n            }\r\n\r\n            if (oldImage && oldImage._map) {\r\n              oldImage._map.removeLayer(oldImage);\r\n            }\r\n          } else {\r\n            this._map.removeLayer(newImage);\r\n          }\r\n        }\r\n\r\n        this.fire('load', {\r\n          bounds: bounds\r\n        });\r\n      };\r\n\r\n      // If loading the image fails\r\n      image.once('error', onOverlayError, this);\r\n\r\n      // once the image loads\r\n      image.once('load', onOverlayLoad, this);\r\n    }\r\n  },\r\n\r\n  _update: function () {\r\n    if (!this._map) {\r\n      return;\r\n    }\r\n\r\n    var zoom = this._map.getZoom();\r\n    var bounds = this._map.getBounds();\r\n\r\n    if (this._animatingZoom) {\r\n      return;\r\n    }\r\n\r\n    if (this._map._panTransition && this._map._panTransition._inProgress) {\r\n      return;\r\n    }\r\n\r\n    if (zoom > this.options.maxZoom || zoom < this.options.minZoom) {\r\n      if (this._currentImage) {\r\n        this._currentImage._map.removeLayer(this._currentImage);\r\n        this._currentImage = null;\r\n      }\r\n      return;\r\n    }\r\n\r\n    var params = this._buildExportParams();\r\n    Util.extend(params, this.options.requestParams);\r\n\r\n    if (params) {\r\n      this._requestExport(params, bounds);\r\n\r\n      this.fire('loading', {\r\n        bounds: bounds\r\n      });\r\n    } else if (this._currentImage) {\r\n      this._currentImage._map.removeLayer(this._currentImage);\r\n      this._currentImage = null;\r\n    }\r\n  },\r\n\r\n  _renderPopup: function (latlng, error, results, response) {\r\n    latlng = latLng(latlng);\r\n    if (this._shouldRenderPopup && this._lastClick.equals(latlng)) {\r\n      // add the popup to the map where the mouse was clicked at\r\n      var content = this._popupFunction(error, results, response);\r\n      if (content) {\r\n        this._popup.setLatLng(latlng).setContent(content).openOn(this._map);\r\n      }\r\n    }\r\n  },\r\n\r\n  _resetPopupState: function (e) {\r\n    this._shouldRenderPopup = false;\r\n    this._lastClick = e.latlng;\r\n  },\r\n\r\n  _calculateBbox: function () {\r\n    var pixelBounds = this._map.getPixelBounds();\r\n\r\n    var sw = this._map.unproject(pixelBounds.getBottomLeft());\r\n    var ne = this._map.unproject(pixelBounds.getTopRight());\r\n\r\n    var neProjected = this._map.options.crs.project(ne);\r\n    var swProjected = this._map.options.crs.project(sw);\r\n\r\n    // this ensures ne/sw are switched in polar maps where north/top bottom/south is inverted\r\n    var boundsProjected = bounds(neProjected, swProjected);\r\n\r\n    return [boundsProjected.getBottomLeft().x, boundsProjected.getBottomLeft().y, boundsProjected.getTopRight().x, boundsProjected.getTopRight().y].join(',');\r\n  },\r\n\r\n  _calculateImageSize: function () {\r\n    // ensure that we don't ask ArcGIS Server for a taller image than we have actual map displaying within the div\r\n    var bounds = this._map.getPixelBounds();\r\n    var size = this._map.getSize();\r\n\r\n    var sw = this._map.unproject(bounds.getBottomLeft());\r\n    var ne = this._map.unproject(bounds.getTopRight());\r\n\r\n    var top = this._map.latLngToLayerPoint(ne).y;\r\n    var bottom = this._map.latLngToLayerPoint(sw).y;\r\n\r\n    if (top > 0 || bottom < size.y) {\r\n      size.y = bottom - top;\r\n    }\r\n\r\n    return size.x + ',' + size.y;\r\n  }\r\n});\r\n","import { Util } from 'leaflet';\r\nimport { RasterLayer } from './RasterLayer';\r\nimport { getUrlParams } from '../Util';\r\nimport imageService from '../Services/ImageService';\r\n\r\nexport var ImageMapLayer = RasterLayer.extend({\r\n\r\n  options: {\r\n    updateInterval: 150,\r\n    format: 'jpgpng',\r\n    transparent: true,\r\n    f: 'image'\r\n  },\r\n\r\n  query: function () {\r\n    return this.service.query();\r\n  },\r\n\r\n  identify: function () {\r\n    return this.service.identify();\r\n  },\r\n\r\n  initialize: function (options) {\r\n    options = getUrlParams(options);\r\n    this.service = imageService(options);\r\n    this.service.addEventParent(this);\r\n\r\n    Util.setOptions(this, options);\r\n  },\r\n\r\n  setPixelType: function (pixelType) {\r\n    this.options.pixelType = pixelType;\r\n    this._update();\r\n    return this;\r\n  },\r\n\r\n  getPixelType: function () {\r\n    return this.options.pixelType;\r\n  },\r\n\r\n  setBandIds: function (bandIds) {\r\n    if (Util.isArray(bandIds)) {\r\n      this.options.bandIds = bandIds.join(',');\r\n    } else {\r\n      this.options.bandIds = bandIds.toString();\r\n    }\r\n    this._update();\r\n    return this;\r\n  },\r\n\r\n  getBandIds: function () {\r\n    return this.options.bandIds;\r\n  },\r\n\r\n  setNoData: function (noData, noDataInterpretation) {\r\n    if (Util.isArray(noData)) {\r\n      this.options.noData = noData.join(',');\r\n    } else {\r\n      this.options.noData = noData.toString();\r\n    }\r\n    if (noDataInterpretation) {\r\n      this.options.noDataInterpretation = noDataInterpretation;\r\n    }\r\n    this._update();\r\n    return this;\r\n  },\r\n\r\n  getNoData: function () {\r\n    return this.options.noData;\r\n  },\r\n\r\n  getNoDataInterpretation: function () {\r\n    return this.options.noDataInterpretation;\r\n  },\r\n\r\n  setRenderingRule: function (renderingRule) {\r\n    this.options.renderingRule = renderingRule;\r\n    this._update();\r\n  },\r\n\r\n  getRenderingRule: function () {\r\n    return this.options.renderingRule;\r\n  },\r\n\r\n  setMosaicRule: function (mosaicRule) {\r\n    this.options.mosaicRule = mosaicRule;\r\n    this._update();\r\n  },\r\n\r\n  getMosaicRule: function () {\r\n    return this.options.mosaicRule;\r\n  },\r\n\r\n  _getPopupData: function (e) {\r\n    var callback = Util.bind(function (error, results, response) {\r\n      if (error) { return; } // we really can't do anything here but authenticate or requesterror will fire\r\n      setTimeout(Util.bind(function () {\r\n        this._renderPopup(e.latlng, error, results, response);\r\n      }, this), 300);\r\n    }, this);\r\n\r\n    var identifyRequest = this.identify().at(e.latlng);\r\n\r\n    // set mosaic rule for identify task if it is set for layer\r\n    if (this.options.mosaicRule) {\r\n      identifyRequest.setMosaicRule(this.options.mosaicRule);\r\n      // @TODO: force return catalog items too?\r\n    }\r\n\r\n    // @TODO: set rendering rule? Not sure,\r\n    // sometimes you want raw pixel values\r\n    // if (this.options.renderingRule) {\r\n    //   identifyRequest.setRenderingRule(this.options.renderingRule);\r\n    // }\r\n\r\n    identifyRequest.run(callback);\r\n\r\n    // set the flags to show the popup\r\n    this._shouldRenderPopup = true;\r\n    this._lastClick = e.latlng;\r\n  },\r\n\r\n  _buildExportParams: function () {\r\n    var sr = parseInt(this._map.options.crs.code.split(':')[1], 10);\r\n\r\n    var params = {\r\n      bbox: this._calculateBbox(),\r\n      size: this._calculateImageSize(),\r\n      format: this.options.format,\r\n      transparent: this.options.transparent,\r\n      bboxSR: sr,\r\n      imageSR: sr\r\n    };\r\n\r\n    if (this.options.from && this.options.to) {\r\n      params.time = this.options.from.valueOf() + ',' + this.options.to.valueOf();\r\n    }\r\n\r\n    if (this.options.pixelType) {\r\n      params.pixelType = this.options.pixelType;\r\n    }\r\n\r\n    if (this.options.interpolation) {\r\n      params.interpolation = this.options.interpolation;\r\n    }\r\n\r\n    if (this.options.compressionQuality) {\r\n      params.compressionQuality = this.options.compressionQuality;\r\n    }\r\n\r\n    if (this.options.bandIds) {\r\n      params.bandIds = this.options.bandIds;\r\n    }\r\n\r\n    // 0 is falsy *and* a valid input parameter\r\n    if (this.options.noData === 0 || this.options.noData) {\r\n      params.noData = this.options.noData;\r\n    }\r\n\r\n    if (this.options.noDataInterpretation) {\r\n      params.noDataInterpretation = this.options.noDataInterpretation;\r\n    }\r\n\r\n    if (this.service.options.token) {\r\n      params.token = this.service.options.token;\r\n    }\r\n\r\n    if (this.options.renderingRule) {\r\n      params.renderingRule = JSON.stringify(this.options.renderingRule);\r\n    }\r\n\r\n    if (this.options.mosaicRule) {\r\n      params.mosaicRule = JSON.stringify(this.options.mosaicRule);\r\n    }\r\n\r\n    return params;\r\n  },\r\n\r\n  _requestExport: function (params, bounds) {\r\n    if (this.options.f === 'json') {\r\n      this.service.request('exportImage', params, function (error, response) {\r\n        if (error) { return; } // we really can't do anything here but authenticate or requesterror will fire\r\n        if (this.options.token) {\r\n          response.href += ('?token=' + this.options.token);\r\n        }\r\n        if (this.options.proxy) {\r\n          response.href = this.options.proxy + '?' + response.href;\r\n        }\r\n        this._renderImage(response.href, bounds);\r\n      }, this);\r\n    } else {\r\n      params.f = 'image';\r\n      this._renderImage(this.options.url + 'exportImage' + Util.getParamString(params), bounds);\r\n    }\r\n  }\r\n});\r\n\r\nexport function imageMapLayer (url, options) {\r\n  return new ImageMapLayer(url, options);\r\n}\r\n\r\nexport default imageMapLayer;\r\n","import { Util } from 'leaflet';\r\nimport { RasterLayer } from './RasterLayer';\r\nimport { getUrlParams } from '../Util';\r\nimport mapService from '../Services/MapService';\r\n\r\nexport var DynamicMapLayer = RasterLayer.extend({\r\n\r\n  options: {\r\n    updateInterval: 150,\r\n    layers: false,\r\n    layerDefs: false,\r\n    timeOptions: false,\r\n    format: 'png24',\r\n    transparent: true,\r\n    f: 'json'\r\n  },\r\n\r\n  initialize: function (options) {\r\n    options = getUrlParams(options);\r\n    this.service = mapService(options);\r\n    this.service.addEventParent(this);\r\n\r\n    if (options.proxy && options.f !== 'json') {\r\n      options.f = 'json';\r\n    }\r\n\r\n    Util.setOptions(this, options);\r\n  },\r\n\r\n  getDynamicLayers: function () {\r\n    return this.options.dynamicLayers;\r\n  },\r\n\r\n  setDynamicLayers: function (dynamicLayers) {\r\n    this.options.dynamicLayers = dynamicLayers;\r\n    this._update();\r\n    return this;\r\n  },\r\n\r\n  getLayers: function () {\r\n    return this.options.layers;\r\n  },\r\n\r\n  setLayers: function (layers) {\r\n    this.options.layers = layers;\r\n    this._update();\r\n    return this;\r\n  },\r\n\r\n  getLayerDefs: function () {\r\n    return this.options.layerDefs;\r\n  },\r\n\r\n  setLayerDefs: function (layerDefs) {\r\n    this.options.layerDefs = layerDefs;\r\n    this._update();\r\n    return this;\r\n  },\r\n\r\n  getTimeOptions: function () {\r\n    return this.options.timeOptions;\r\n  },\r\n\r\n  setTimeOptions: function (timeOptions) {\r\n    this.options.timeOptions = timeOptions;\r\n    this._update();\r\n    return this;\r\n  },\r\n\r\n  query: function () {\r\n    return this.service.query();\r\n  },\r\n\r\n  identify: function () {\r\n    return this.service.identify();\r\n  },\r\n\r\n  find: function () {\r\n    return this.service.find();\r\n  },\r\n\r\n  _getPopupData: function (e) {\r\n    var callback = Util.bind(function (error, featureCollection, response) {\r\n      if (error) { return; } // we really can't do anything here but authenticate or requesterror will fire\r\n      setTimeout(Util.bind(function () {\r\n        this._renderPopup(e.latlng, error, featureCollection, response);\r\n      }, this), 300);\r\n    }, this);\r\n\r\n    var identifyRequest;\r\n    if (this.options.popup) {\r\n      identifyRequest = this.options.popup.on(this._map).at(e.latlng);\r\n    } else {\r\n      identifyRequest = this.identify().on(this._map).at(e.latlng);\r\n    }\r\n\r\n    // remove extraneous vertices from response features if it has not already been done\r\n    identifyRequest.params.maxAllowableOffset ? true : identifyRequest.simplify(this._map, 0.5);\r\n\r\n    if (!(this.options.popup && this.options.popup.params && this.options.popup.params.layers)) {\r\n      if (this.options.layers) {\r\n        identifyRequest.layers('visible:' + this.options.layers.join(','));\r\n      } else {\r\n        identifyRequest.layers('visible');\r\n      }\r\n    }\r\n\r\n    // if present, pass layer ids and sql filters through to the identify task\r\n    if (this.options.layerDefs && typeof this.options.layerDefs !== 'string' && !identifyRequest.params.layerDefs) {\r\n      for (var id in this.options.layerDefs) {\r\n        if (this.options.layerDefs.hasOwnProperty(id)) {\r\n          identifyRequest.layerDef(id, this.options.layerDefs[id]);\r\n        }\r\n      }\r\n    }\r\n\r\n    identifyRequest.run(callback);\r\n\r\n    // set the flags to show the popup\r\n    this._shouldRenderPopup = true;\r\n    this._lastClick = e.latlng;\r\n  },\r\n\r\n  _buildExportParams: function () {\r\n    var sr = parseInt(this._map.options.crs.code.split(':')[1], 10);\r\n\r\n    var params = {\r\n      bbox: this._calculateBbox(),\r\n      size: this._calculateImageSize(),\r\n      dpi: 96,\r\n      format: this.options.format,\r\n      transparent: this.options.transparent,\r\n      bboxSR: sr,\r\n      imageSR: sr\r\n    };\r\n\r\n    if (this.options.dynamicLayers) {\r\n      params.dynamicLayers = this.options.dynamicLayers;\r\n    }\r\n\r\n    if (this.options.layers) {\r\n      if (this.options.layers.length === 0) {\r\n        return;\r\n      } else {\r\n        params.layers = 'show:' + this.options.layers.join(',');\r\n      }\r\n    }\r\n\r\n    if (this.options.layerDefs) {\r\n      params.layerDefs = typeof this.options.layerDefs === 'string' ? this.options.layerDefs : JSON.stringify(this.options.layerDefs);\r\n    }\r\n\r\n    if (this.options.timeOptions) {\r\n      params.timeOptions = JSON.stringify(this.options.timeOptions);\r\n    }\r\n\r\n    if (this.options.from && this.options.to) {\r\n      params.time = this.options.from.valueOf() + ',' + this.options.to.valueOf();\r\n    }\r\n\r\n    if (this.service.options.token) {\r\n      params.token = this.service.options.token;\r\n    }\r\n\r\n    if (this.options.proxy) {\r\n      params.proxy = this.options.proxy;\r\n    }\r\n\r\n    // use a timestamp to bust server cache\r\n    if (this.options.disableCache) {\r\n      params._ts = Date.now();\r\n    }\r\n\r\n    return params;\r\n  },\r\n\r\n  _requestExport: function (params, bounds) {\r\n    if (this.options.f === 'json') {\r\n      this.service.request('export', params, function (error, response) {\r\n        if (error) { return; } // we really can't do anything here but authenticate or requesterror will fire\r\n\r\n        if (this.options.token && response.href) {\r\n          response.href += ('?token=' + this.options.token);\r\n        }\r\n        if (this.options.proxy && response.href) {\r\n          response.href = this.options.proxy + '?' + response.href;\r\n        }\r\n        if (response.href) {\r\n          this._renderImage(response.href, bounds);\r\n        } else {\r\n          this._renderImage(response.imageData, bounds, response.contentType);\r\n        }\r\n      }, this);\r\n    } else {\r\n      params.f = 'image';\r\n      this._renderImage(this.options.url + 'export' + Util.getParamString(params), bounds);\r\n    }\r\n  }\r\n});\r\n\r\nexport function dynamicMapLayer (url, options) {\r\n  return new DynamicMapLayer(url, options);\r\n}\r\n\r\nexport default dynamicMapLayer;\r\n","import {\r\n  LatLngBounds,\r\n  toLatLngBounds as latLngBounds,\r\n  Layer,\r\n  Browser,\r\n  Util,\r\n  Point,\r\n  Bounds\r\n} from 'leaflet';\r\n\r\nexport var FeatureGrid = Layer.extend({\r\n  // @section\r\n  // @aka GridLayer options\r\n  options: {\r\n    // @option cellSize: Number|Point = 256\r\n    // Width and height of cells in the grid. Use a number if width and height are equal, or `L.point(width, height)` otherwise.\r\n    cellSize: 512,\r\n\r\n    // @option updateWhenIdle: Boolean = (depends)\r\n    // Load new cells only when panning ends.\r\n    // `true` by default on mobile browsers, in order to avoid too many requests and keep smooth navigation.\r\n    // `false` otherwise in order to display new cells _during_ panning, since it is easy to pan outside the\r\n    // [`keepBuffer`](#gridlayer-keepbuffer) option in desktop browsers.\r\n    updateWhenIdle: Browser.mobile,\r\n\r\n    // @option updateInterval: Number = 150\r\n    // Cells will not update more than once every `updateInterval` milliseconds when panning.\r\n    updateInterval: 150,\r\n\r\n    // @option noWrap: Boolean = false\r\n    // Whether the layer is wrapped around the antimeridian. If `true`, the\r\n    // GridLayer will only be displayed once at low zoom levels. Has no\r\n    // effect when the [map CRS](#map-crs) doesn't wrap around. Can be used\r\n    // in combination with [`bounds`](#gridlayer-bounds) to prevent requesting\r\n    // cells outside the CRS limits.\r\n    noWrap: false,\r\n\r\n    // @option keepBuffer: Number = 1.5\r\n    // When panning the map, keep this many rows and columns of cells before unloading them.\r\n    keepBuffer: 1.5\r\n  },\r\n\r\n  initialize: function (options) {\r\n    Util.setOptions(this, options);\r\n  },\r\n\r\n  onAdd: function () {\r\n    this._cells = {};\r\n    this._activeCells = {};\r\n    this._resetView();\r\n    this._update();\r\n  },\r\n\r\n  onRemove: function (map) {\r\n    this._removeAllCells();\r\n    this._cellZoom = undefined;\r\n  },\r\n\r\n  // @method isLoading: Boolean\r\n  // Returns `true` if any cell in the grid layer has not finished loading.\r\n  isLoading: function () {\r\n    return this._loading;\r\n  },\r\n\r\n  // @method redraw: this\r\n  // Causes the layer to clear all the cells and request them again.\r\n  redraw: function () {\r\n    if (this._map) {\r\n      this._removeAllCells();\r\n      this._update();\r\n    }\r\n    return this;\r\n  },\r\n\r\n  getEvents: function () {\r\n    var events = {\r\n      viewprereset: this._invalidateAll,\r\n      viewreset: this._resetView,\r\n      zoom: this._resetView,\r\n      moveend: this._onMoveEnd\r\n    };\r\n\r\n    if (!this.options.updateWhenIdle) {\r\n      // update cells on move, but not more often than once per given interval\r\n      if (!this._onMove) {\r\n        this._onMove = Util.throttle(\r\n          this._onMoveEnd,\r\n          this.options.updateInterval,\r\n          this\r\n        );\r\n      }\r\n\r\n      events.move = this._onMove;\r\n    }\r\n\r\n    return events;\r\n  },\r\n\r\n  // @section Extension methods\r\n  // Layers extending `GridLayer` shall reimplement the following method.\r\n  // @method createCell(coords: Object, done?: Function): HTMLElement\r\n  // Called only internally, must be overridden by classes extending `GridLayer`.\r\n  // Returns the `HTMLElement` corresponding to the given `coords`. If the `done` callback\r\n  // is specified, it must be called when the cell has finished loading and drawing.\r\n  createCell: function () {\r\n    return document.createElement('div');\r\n  },\r\n\r\n  removeCell: function () {\r\n    return;\r\n  },\r\n\r\n  reuseCell: function () {\r\n    return;\r\n  },\r\n\r\n  cellLeave: function () {\r\n    return;\r\n  },\r\n\r\n  // @section\r\n  // @method getCellSize: Point\r\n  // Normalizes the [cellSize option](#gridlayer-cellsize) into a point. Used by the `createCell()` method.\r\n  getCellSize: function () {\r\n    var s = this.options.cellSize;\r\n    return s instanceof Point ? s : new Point(s, s);\r\n  },\r\n\r\n  _pruneCells: function () {\r\n    if (!this._map) {\r\n      return;\r\n    }\r\n\r\n    var key, cell;\r\n\r\n    for (key in this._cells) {\r\n      cell = this._cells[key];\r\n      cell.retain = cell.current;\r\n    }\r\n\r\n    for (key in this._cells) {\r\n      cell = this._cells[key];\r\n      if (cell.current && !cell.active) {\r\n        var coords = cell.coords;\r\n        if (!this._retainParent(coords.x, coords.y, coords.z, coords.z - 5)) {\r\n          this._retainChildren(coords.x, coords.y, coords.z, coords.z + 2);\r\n        }\r\n      }\r\n    }\r\n\r\n    for (key in this._cells) {\r\n      if (!this._cells[key].retain) {\r\n        this._removeCell(key);\r\n      }\r\n    }\r\n  },\r\n\r\n  _removeAllCells: function () {\r\n    for (var key in this._cells) {\r\n      this._removeCell(key);\r\n    }\r\n  },\r\n\r\n  _invalidateAll: function () {\r\n    this._removeAllCells();\r\n\r\n    this._cellZoom = undefined;\r\n  },\r\n\r\n  _retainParent: function (x, y, z, minZoom) {\r\n    var x2 = Math.floor(x / 2);\r\n    var y2 = Math.floor(y / 2);\r\n    var z2 = z - 1;\r\n    var coords2 = new Point(+x2, +y2);\r\n    coords2.z = +z2;\r\n\r\n    var key = this._cellCoordsToKey(coords2);\r\n    var cell = this._cells[key];\r\n\r\n    if (cell && cell.active) {\r\n      cell.retain = true;\r\n      return true;\r\n    } else if (cell && cell.loaded) {\r\n      cell.retain = true;\r\n    }\r\n\r\n    if (z2 > minZoom) {\r\n      return this._retainParent(x2, y2, z2, minZoom);\r\n    }\r\n\r\n    return false;\r\n  },\r\n\r\n  _retainChildren: function (x, y, z, maxZoom) {\r\n    for (var i = 2 * x; i < 2 * x + 2; i++) {\r\n      for (var j = 2 * y; j < 2 * y + 2; j++) {\r\n        var coords = new Point(i, j);\r\n        coords.z = z + 1;\r\n\r\n        var key = this._cellCoordsToKey(coords);\r\n        var cell = this._cells[key];\r\n\r\n        if (cell && cell.active) {\r\n          cell.retain = true;\r\n          continue;\r\n        } else if (cell && cell.loaded) {\r\n          cell.retain = true;\r\n        }\r\n\r\n        if (z + 1 < maxZoom) {\r\n          this._retainChildren(i, j, z + 1, maxZoom);\r\n        }\r\n      }\r\n    }\r\n  },\r\n\r\n  _resetView: function (e) {\r\n    var animating = e && (e.pinch || e.flyTo);\r\n\r\n    if (animating) {\r\n      return;\r\n    }\r\n\r\n    this._setView(\r\n      this._map.getCenter(),\r\n      this._map.getZoom(),\r\n      animating,\r\n      animating\r\n    );\r\n  },\r\n\r\n  _setView: function (center, zoom, noPrune, noUpdate) {\r\n    var cellZoom = Math.round(zoom);\r\n\r\n    if (!noUpdate) {\r\n      this._cellZoom = cellZoom;\r\n\r\n      if (this._abortLoading) {\r\n        this._abortLoading();\r\n      }\r\n\r\n      this._resetGrid();\r\n\r\n      if (cellZoom !== undefined) {\r\n        this._update(center);\r\n      }\r\n\r\n      if (!noPrune) {\r\n        this._pruneCells();\r\n      }\r\n\r\n      // Flag to prevent _updateOpacity from pruning cells during\r\n      // a zoom anim or a pinch gesture\r\n      this._noPrune = !!noPrune;\r\n    }\r\n  },\r\n\r\n  _resetGrid: function () {\r\n    var map = this._map;\r\n    var crs = map.options.crs;\r\n    var cellSize = (this._cellSize = this.getCellSize());\r\n    var cellZoom = this._cellZoom;\r\n\r\n    var bounds = this._map.getPixelWorldBounds(this._cellZoom);\r\n    if (bounds) {\r\n      this._globalCellRange = this._pxBoundsToCellRange(bounds);\r\n    }\r\n\r\n    this._wrapX = crs.wrapLng &&\r\n      !this.options.noWrap && [\r\n        Math.floor(map.project([0, crs.wrapLng[0]], cellZoom).x / cellSize.x),\r\n        Math.ceil(map.project([0, crs.wrapLng[1]], cellZoom).x / cellSize.y)\r\n      ];\r\n    this._wrapY = crs.wrapLat &&\r\n      !this.options.noWrap && [\r\n        Math.floor(map.project([crs.wrapLat[0], 0], cellZoom).y / cellSize.x),\r\n        Math.ceil(map.project([crs.wrapLat[1], 0], cellZoom).y / cellSize.y)\r\n      ];\r\n  },\r\n\r\n  _onMoveEnd: function (e) {\r\n    var animating = e && (e.pinch || e.flyTo);\r\n\r\n    if (animating || !this._map || this._map._animatingZoom) {\r\n      return;\r\n    }\r\n\r\n    this._update();\r\n  },\r\n\r\n  _getCelldPixelBounds: function (center) {\r\n    var map = this._map;\r\n    var mapZoom = map._animatingZoom\r\n      ? Math.max(map._animateToZoom, map.getZoom())\r\n      : map.getZoom();\r\n    var scale = map.getZoomScale(mapZoom, this._cellZoom);\r\n    var pixelCenter = map.project(center, this._cellZoom).floor();\r\n    var halfSize = map.getSize().divideBy(scale * 2);\r\n\r\n    return new Bounds(\r\n      pixelCenter.subtract(halfSize),\r\n      pixelCenter.add(halfSize)\r\n    );\r\n  },\r\n\r\n  // Private method to load cells in the grid's active zoom level according to map bounds\r\n  _update: function (center) {\r\n    var map = this._map;\r\n    if (!map) {\r\n      return;\r\n    }\r\n    var zoom = Math.round(map.getZoom());\r\n\r\n    if (center === undefined) {\r\n      center = map.getCenter();\r\n    }\r\n\r\n    var pixelBounds = this._getCelldPixelBounds(center);\r\n    var cellRange = this._pxBoundsToCellRange(pixelBounds);\r\n    var cellCenter = cellRange.getCenter();\r\n    var queue = [];\r\n    var margin = this.options.keepBuffer;\r\n    var noPruneRange = new Bounds(\r\n      cellRange.getBottomLeft().subtract([margin, -margin]),\r\n      cellRange.getTopRight().add([margin, -margin])\r\n    );\r\n\r\n    // Sanity check: panic if the cell range contains Infinity somewhere.\r\n    if (\r\n      !(\r\n        isFinite(cellRange.min.x) &&\r\n        isFinite(cellRange.min.y) &&\r\n        isFinite(cellRange.max.x) &&\r\n        isFinite(cellRange.max.y)\r\n      )\r\n    ) {\r\n      throw new Error('Attempted to load an infinite number of cells');\r\n    }\r\n\r\n    for (var key in this._cells) {\r\n      var c = this._cells[key].coords;\r\n      if (\r\n        c.z !== this._cellZoom ||\r\n        !noPruneRange.contains(new Point(c.x, c.y))\r\n      ) {\r\n        this._cells[key].current = false;\r\n      }\r\n    }\r\n\r\n    // _update just loads more cells. If the cell zoom level differs too much\r\n    // from the map's, let _setView reset levels and prune old cells.\r\n    if (Math.abs(zoom - this._cellZoom) > 1) {\r\n      this._setView(center, zoom);\r\n      return;\r\n    }\r\n\r\n    // create a queue of coordinates to load cells from\r\n    for (var j = cellRange.min.y; j <= cellRange.max.y; j++) {\r\n      for (var i = cellRange.min.x; i <= cellRange.max.x; i++) {\r\n        var coords = new Point(i, j);\r\n        coords.z = this._cellZoom;\r\n\r\n        if (!this._isValidCell(coords)) {\r\n          continue;\r\n        }\r\n\r\n        var cell = this._cells[this._cellCoordsToKey(coords)];\r\n        if (cell) {\r\n          cell.current = true;\r\n        } else {\r\n          queue.push(coords);\r\n        }\r\n      }\r\n    }\r\n\r\n    // sort cell queue to load cells in order of their distance to center\r\n    queue.sort(function (a, b) {\r\n      return a.distanceTo(cellCenter) - b.distanceTo(cellCenter);\r\n    });\r\n\r\n    if (queue.length !== 0) {\r\n      // if it's the first batch of cells to load\r\n      if (!this._loading) {\r\n        this._loading = true;\r\n      }\r\n\r\n      for (i = 0; i < queue.length; i++) {\r\n        if (this._activeCells[this._cellCoordsToKey(queue[i])]) {\r\n          this._reuseCell(queue[i]);\r\n        } else {\r\n          this._createCell(queue[i]);\r\n        }\r\n      }\r\n    }\r\n  },\r\n\r\n  _isValidCell: function (coords) {\r\n    var crs = this._map.options.crs;\r\n\r\n    if (!crs.infinite) {\r\n      // don't load cell if it's out of bounds and not wrapped\r\n      var bounds = this._globalCellRange;\r\n      if (\r\n        (!crs.wrapLng &&\r\n          (coords.x < bounds.min.x || coords.x > bounds.max.x)) ||\r\n        (!crs.wrapLat && (coords.y < bounds.min.y || coords.y > bounds.max.y))\r\n      ) {\r\n        return false;\r\n      }\r\n    }\r\n\r\n    if (!this.options.bounds) {\r\n      return true;\r\n    }\r\n\r\n    // don't load cell if it doesn't intersect the bounds in options\r\n    var cellBounds = this._cellCoordsToBounds(coords);\r\n    return latLngBounds(this.options.bounds).overlaps(cellBounds);\r\n  },\r\n\r\n  _keyToBounds: function (key) {\r\n    return this._cellCoordsToBounds(this._keyToCellCoords(key));\r\n  },\r\n\r\n  _cellCoordsToNwSe: function (coords) {\r\n    var map = this._map;\r\n    var cellSize = this.getCellSize();\r\n    var nwPoint = coords.scaleBy(cellSize);\r\n    var sePoint = nwPoint.add(cellSize);\r\n    var nw = map.unproject(nwPoint, coords.z);\r\n    var se = map.unproject(sePoint, coords.z);\r\n\r\n    return [nw, se];\r\n  },\r\n\r\n  // converts cell coordinates to its geographical bounds\r\n  _cellCoordsToBounds: function (coords) {\r\n    var bp = this._cellCoordsToNwSe(coords);\r\n    var bounds = new LatLngBounds(bp[0], bp[1]);\r\n\r\n    if (!this.options.noWrap) {\r\n      bounds = this._map.wrapLatLngBounds(bounds);\r\n    }\r\n    return bounds;\r\n  },\r\n  // converts cell coordinates to key for the cell cache\r\n  _cellCoordsToKey: function (coords) {\r\n    return coords.x + ':' + coords.y + ':' + coords.z;\r\n  },\r\n\r\n  // converts cell cache key to coordinates\r\n  _keyToCellCoords: function (key) {\r\n    var k = key.split(':');\r\n    var coords = new Point(+k[0], +k[1]);\r\n\r\n    coords.z = +k[2];\r\n    return coords;\r\n  },\r\n\r\n  _removeCell: function (key) {\r\n    var cell = this._cells[key];\r\n\r\n    if (!cell) {\r\n      return;\r\n    }\r\n\r\n    var coords = this._keyToCellCoords(key);\r\n    var wrappedCoords = this._wrapCoords(coords);\r\n    var cellBounds = this._cellCoordsToBounds(this._wrapCoords(coords));\r\n\r\n    cell.current = false;\r\n\r\n    delete this._cells[key];\r\n    this._activeCells[key] = cell;\r\n\r\n    this.cellLeave(cellBounds, wrappedCoords, key);\r\n\r\n    this.fire('cellleave', {\r\n      key: key,\r\n      coords: wrappedCoords,\r\n      bounds: cellBounds\r\n    });\r\n  },\r\n\r\n  _reuseCell: function (coords) {\r\n    var key = this._cellCoordsToKey(coords);\r\n\r\n    // save cell in cache\r\n    this._cells[key] = this._activeCells[key];\r\n    this._cells[key].current = true;\r\n\r\n    var wrappedCoords = this._wrapCoords(coords);\r\n    var cellBounds = this._cellCoordsToBounds(this._wrapCoords(coords));\r\n\r\n    this.cellEnter(cellBounds, wrappedCoords, key);\r\n\r\n    this.fire('cellenter', {\r\n      key: key,\r\n      coords: wrappedCoords,\r\n      bounds: cellBounds\r\n    });\r\n  },\r\n\r\n  _createCell: function (coords) {\r\n    var key = this._cellCoordsToKey(coords);\r\n\r\n    var wrappedCoords = this._wrapCoords(coords);\r\n    var cellBounds = this._cellCoordsToBounds(this._wrapCoords(coords));\r\n\r\n    this.createCell(cellBounds, wrappedCoords, key);\r\n\r\n    this.fire('cellcreate', {\r\n      key: key,\r\n      coords: wrappedCoords,\r\n      bounds: cellBounds\r\n    });\r\n\r\n    // save cell in cache\r\n    this._cells[key] = {\r\n      coords: coords,\r\n      current: true\r\n    };\r\n\r\n    Util.requestAnimFrame(this._pruneCells, this);\r\n  },\r\n\r\n  _cellReady: function (coords, err, cell) {\r\n    var key = this._cellCoordsToKey(coords);\r\n\r\n    cell = this._cells[key];\r\n\r\n    if (!cell) {\r\n      return;\r\n    }\r\n\r\n    cell.loaded = +new Date();\r\n\r\n    cell.active = true;\r\n  },\r\n\r\n  _getCellPos: function (coords) {\r\n    return coords.scaleBy(this.getCellSize());\r\n  },\r\n\r\n  _wrapCoords: function (coords) {\r\n    var newCoords = new Point(\r\n      this._wrapX ? Util.wrapNum(coords.x, this._wrapX) : coords.x,\r\n      this._wrapY ? Util.wrapNum(coords.y, this._wrapY) : coords.y\r\n    );\r\n    newCoords.z = coords.z;\r\n    return newCoords;\r\n  },\r\n\r\n  _pxBoundsToCellRange: function (bounds) {\r\n    var cellSize = this.getCellSize();\r\n    return new Bounds(\r\n      bounds.min.unscaleBy(cellSize).floor(),\r\n      bounds.max.unscaleBy(cellSize).ceil().subtract([1, 1])\r\n    );\r\n  }\r\n});\r\n","function BinarySearchIndex (values) {\n  this.values = [].concat(values || []);\n}\n\nBinarySearchIndex.prototype.query = function (value) {\n  var index = this.getIndex(value);\n  return this.values[index];\n};\n\nBinarySearchIndex.prototype.getIndex = function getIndex (value) {\n  if (this.dirty) {\n    this.sort();\n  }\n\n  var minIndex = 0;\n  var maxIndex = this.values.length - 1;\n  var currentIndex;\n  var currentElement;\n\n  while (minIndex <= maxIndex) {\n    currentIndex = (minIndex + maxIndex) / 2 | 0;\n    currentElement = this.values[Math.round(currentIndex)];\n    if (+currentElement.value < +value) {\n      minIndex = currentIndex + 1;\n    } else if (+currentElement.value > +value) {\n      maxIndex = currentIndex - 1;\n    } else {\n      return currentIndex;\n    }\n  }\n\n  return Math.abs(~maxIndex);\n};\n\nBinarySearchIndex.prototype.between = function between (start, end) {\n  var startIndex = this.getIndex(start);\n  var endIndex = this.getIndex(end);\n\n  if (startIndex === 0 && endIndex === 0) {\n    return [];\n  }\n\n  while (this.values[startIndex - 1] && this.values[startIndex - 1].value === start) {\n    startIndex--;\n  }\n\n  while (this.values[endIndex + 1] && this.values[endIndex + 1].value === end) {\n    endIndex++;\n  }\n\n  if (this.values[endIndex] && this.values[endIndex].value === end && this.values[endIndex + 1]) {\n    endIndex++;\n  }\n\n  return this.values.slice(startIndex, endIndex);\n};\n\nBinarySearchIndex.prototype.insert = function insert (item) {\n  this.values.splice(this.getIndex(item.value), 0, item);\n  return this;\n};\n\nBinarySearchIndex.prototype.bulkAdd = function bulkAdd (items, sort) {\n  this.values = this.values.concat([].concat(items || []));\n\n  if (sort) {\n    this.sort();\n  } else {\n    this.dirty = true;\n  }\n\n  return this;\n};\n\nBinarySearchIndex.prototype.sort = function sort () {\n  this.values.sort(function (a, b) {\n    return +b.value - +a.value;\n  }).reverse();\n  this.dirty = false;\n  return this;\n};\n\nexport default BinarySearchIndex;\n","import { Util } from 'leaflet';\r\nimport featureLayerService from '../../Services/FeatureLayerService';\r\nimport { getUrlParams, warn, setEsriAttribution } from '../../Util';\r\nimport { FeatureGrid } from './FeatureGrid';\r\nimport BinarySearchIndex from 'tiny-binary-search';\r\n\r\nexport var FeatureManager = FeatureGrid.extend({\r\n  /**\r\n   * Options\r\n   */\r\n\r\n  options: {\r\n    attribution: null,\r\n    where: '1=1',\r\n    fields: ['*'],\r\n    from: false,\r\n    to: false,\r\n    timeField: false,\r\n    timeFilterMode: 'server',\r\n    simplifyFactor: 0,\r\n    precision: 6\r\n  },\r\n\r\n  /**\r\n   * Constructor\r\n   */\r\n\r\n  initialize: function (options) {\r\n    FeatureGrid.prototype.initialize.call(this, options);\r\n\r\n    options = getUrlParams(options);\r\n    options = Util.setOptions(this, options);\r\n\r\n    this.service = featureLayerService(options);\r\n    this.service.addEventParent(this);\r\n\r\n    // use case insensitive regex to look for common fieldnames used for indexing\r\n    if (this.options.fields[0] !== '*') {\r\n      var oidCheck = false;\r\n      for (var i = 0; i < this.options.fields.length; i++) {\r\n        if (this.options.fields[i].match(/^(OBJECTID|FID|OID|ID)$/i)) {\r\n          oidCheck = true;\r\n        }\r\n      }\r\n      if (oidCheck === false) {\r\n        warn(\r\n          'no known esriFieldTypeOID field detected in fields Array.  Please add an attribute field containing unique IDs to ensure the layer can be drawn correctly.'\r\n        );\r\n      }\r\n    }\r\n\r\n    if (this.options.timeField.start && this.options.timeField.end) {\r\n      this._startTimeIndex = new BinarySearchIndex();\r\n      this._endTimeIndex = new BinarySearchIndex();\r\n    } else if (this.options.timeField) {\r\n      this._timeIndex = new BinarySearchIndex();\r\n    }\r\n\r\n    this._cache = {};\r\n    this._currentSnapshot = []; // cache of what layers should be active\r\n    this._activeRequests = 0;\r\n  },\r\n\r\n  /**\r\n   * Layer Interface\r\n   */\r\n\r\n  onAdd: function (map) {\r\n    // include 'Powered by Esri' in map attribution\r\n    setEsriAttribution(map);\r\n\r\n    this.service.metadata(function (err, metadata) {\r\n      if (!err) {\r\n        var supportedFormats = metadata.supportedQueryFormats;\r\n\r\n        // Check if someone has requested that we don't use geoJSON, even if it's available\r\n        var forceJsonFormat = false;\r\n        if (this.service.options.isModern === false) {\r\n          forceJsonFormat = true;\r\n        }\r\n\r\n        // Unless we've been told otherwise, check to see whether service can emit GeoJSON natively\r\n        if (\r\n          !forceJsonFormat &&\r\n          supportedFormats &&\r\n          supportedFormats.indexOf('geoJSON') !== -1\r\n        ) {\r\n          this.service.options.isModern = true;\r\n        }\r\n\r\n        if (metadata.objectIdField) {\r\n          this.service.options.idAttribute = metadata.objectIdField;\r\n        }\r\n\r\n        // add copyright text listed in service metadata\r\n        if (\r\n          !this.options.attribution &&\r\n          map.attributionControl &&\r\n          metadata.copyrightText\r\n        ) {\r\n          this.options.attribution = metadata.copyrightText;\r\n          map.attributionControl.addAttribution(this.getAttribution());\r\n        }\r\n      }\r\n    }, this);\r\n\r\n    map.on('zoomend', this._handleZoomChange, this);\r\n\r\n    return FeatureGrid.prototype.onAdd.call(this, map);\r\n  },\r\n\r\n  onRemove: function (map) {\r\n    map.off('zoomend', this._handleZoomChange, this);\r\n\r\n    return FeatureGrid.prototype.onRemove.call(this, map);\r\n  },\r\n\r\n  getAttribution: function () {\r\n    return this.options.attribution;\r\n  },\r\n\r\n  /**\r\n   * Feature Management\r\n   */\r\n\r\n  createCell: function (bounds, coords) {\r\n    // dont fetch features outside the scale range defined for the layer\r\n    if (this._visibleZoom()) {\r\n      this._requestFeatures(bounds, coords);\r\n    }\r\n  },\r\n\r\n  _requestFeatures: function (bounds, coords, callback) {\r\n    this._activeRequests++;\r\n\r\n    // our first active request fires loading\r\n    if (this._activeRequests === 1) {\r\n      this.fire(\r\n        'loading',\r\n        {\r\n          bounds: bounds\r\n        },\r\n        true\r\n      );\r\n    }\r\n\r\n    return this._buildQuery(bounds).run(function (\r\n      error,\r\n      featureCollection,\r\n      response\r\n    ) {\r\n      if (response && response.exceededTransferLimit) {\r\n        this.fire('drawlimitexceeded');\r\n      }\r\n\r\n      // no error, features\r\n      if (!error && featureCollection && featureCollection.features.length) {\r\n        // schedule adding features until the next animation frame\r\n        Util.requestAnimFrame(\r\n          Util.bind(function () {\r\n            this._addFeatures(featureCollection.features, coords);\r\n            this._postProcessFeatures(bounds);\r\n          }, this)\r\n        );\r\n      }\r\n\r\n      // no error, no features\r\n      if (!error && featureCollection && !featureCollection.features.length) {\r\n        this._postProcessFeatures(bounds);\r\n      }\r\n\r\n      if (error) {\r\n        this._postProcessFeatures(bounds);\r\n      }\r\n\r\n      if (callback) {\r\n        callback.call(this, error, featureCollection);\r\n      }\r\n    },\r\n    this);\r\n  },\r\n\r\n  _postProcessFeatures: function (bounds) {\r\n    // deincrement the request counter now that we have processed features\r\n    this._activeRequests--;\r\n\r\n    // if there are no more active requests fire a load event for this view\r\n    if (this._activeRequests <= 0) {\r\n      this.fire('load', {\r\n        bounds: bounds\r\n      });\r\n    }\r\n  },\r\n\r\n  _cacheKey: function (coords) {\r\n    return coords.z + ':' + coords.x + ':' + coords.y;\r\n  },\r\n\r\n  _addFeatures: function (features, coords) {\r\n    var key = this._cacheKey(coords);\r\n    this._cache[key] = this._cache[key] || [];\r\n\r\n    for (var i = features.length - 1; i >= 0; i--) {\r\n      var id = features[i].id;\r\n\r\n      if (this._currentSnapshot.indexOf(id) === -1) {\r\n        this._currentSnapshot.push(id);\r\n      }\r\n      if (this._cache[key].indexOf(id) === -1) {\r\n        this._cache[key].push(id);\r\n      }\r\n    }\r\n\r\n    if (this.options.timeField) {\r\n      this._buildTimeIndexes(features);\r\n    }\r\n\r\n    this.createLayers(features);\r\n  },\r\n\r\n  _buildQuery: function (bounds) {\r\n    var query = this.service\r\n      .query()\r\n      .intersects(bounds)\r\n      .where(this.options.where)\r\n      .fields(this.options.fields)\r\n      .precision(this.options.precision);\r\n\r\n    query.params['resultType'] = 'tile';\r\n\r\n    if (this.options.requestParams) {\r\n      Util.extend(query.params, this.options.requestParams);\r\n    }\r\n\r\n    if (this.options.simplifyFactor) {\r\n      query.simplify(this._map, this.options.simplifyFactor);\r\n    }\r\n\r\n    if (\r\n      this.options.timeFilterMode === 'server' &&\r\n      this.options.from &&\r\n      this.options.to\r\n    ) {\r\n      query.between(this.options.from, this.options.to);\r\n    }\r\n\r\n    return query;\r\n  },\r\n\r\n  /**\r\n   * Where Methods\r\n   */\r\n\r\n  setWhere: function (where, callback, context) {\r\n    this.options.where = where && where.length ? where : '1=1';\r\n\r\n    var oldSnapshot = [];\r\n    var newSnapshot = [];\r\n    var pendingRequests = 0;\r\n    var requestError = null;\r\n    var requestCallback = Util.bind(function (error, featureCollection) {\r\n      if (error) {\r\n        requestError = error;\r\n      }\r\n\r\n      if (featureCollection) {\r\n        for (var i = featureCollection.features.length - 1; i >= 0; i--) {\r\n          newSnapshot.push(featureCollection.features[i].id);\r\n        }\r\n      }\r\n\r\n      pendingRequests--;\r\n\r\n      if (pendingRequests <= 0 && this._visibleZoom()) {\r\n        this._currentSnapshot = newSnapshot;\r\n        // schedule adding features for the next animation frame\r\n        Util.requestAnimFrame(\r\n          Util.bind(function () {\r\n            this.removeLayers(oldSnapshot);\r\n            this.addLayers(newSnapshot);\r\n            if (callback) {\r\n              callback.call(context, requestError);\r\n            }\r\n          }, this)\r\n        );\r\n      }\r\n    }, this);\r\n\r\n    for (var i = this._currentSnapshot.length - 1; i >= 0; i--) {\r\n      oldSnapshot.push(this._currentSnapshot[i]);\r\n    }\r\n    for (var key in this._cells) {\r\n      pendingRequests++;\r\n      var coords = this._keyToCellCoords(key);\r\n      var bounds = this._cellCoordsToBounds(coords);\r\n      this._requestFeatures(bounds, key, requestCallback);\r\n    }\r\n\r\n    return this;\r\n  },\r\n\r\n  getWhere: function () {\r\n    return this.options.where;\r\n  },\r\n\r\n  /**\r\n   * Time Range Methods\r\n   */\r\n\r\n  getTimeRange: function () {\r\n    return [this.options.from, this.options.to];\r\n  },\r\n\r\n  setTimeRange: function (from, to, callback, context) {\r\n    var oldFrom = this.options.from;\r\n    var oldTo = this.options.to;\r\n    var pendingRequests = 0;\r\n    var requestError = null;\r\n    var requestCallback = Util.bind(function (error) {\r\n      if (error) {\r\n        requestError = error;\r\n      }\r\n      this._filterExistingFeatures(oldFrom, oldTo, from, to);\r\n\r\n      pendingRequests--;\r\n\r\n      if (callback && pendingRequests <= 0) {\r\n        callback.call(context, requestError);\r\n      }\r\n    }, this);\r\n\r\n    this.options.from = from;\r\n    this.options.to = to;\r\n\r\n    this._filterExistingFeatures(oldFrom, oldTo, from, to);\r\n\r\n    if (this.options.timeFilterMode === 'server') {\r\n      for (var key in this._cells) {\r\n        pendingRequests++;\r\n        var coords = this._keyToCellCoords(key);\r\n        var bounds = this._cellCoordsToBounds(coords);\r\n        this._requestFeatures(bounds, key, requestCallback);\r\n      }\r\n    }\r\n\r\n    return this;\r\n  },\r\n\r\n  refresh: function () {\r\n    for (var key in this._cells) {\r\n      var coords = this._keyToCellCoords(key);\r\n      var bounds = this._cellCoordsToBounds(coords);\r\n      this._requestFeatures(bounds, key);\r\n    }\r\n\r\n    if (this.redraw) {\r\n      this.once(\r\n        'load',\r\n        function () {\r\n          this.eachFeature(function (layer) {\r\n            this._redraw(layer.feature.id);\r\n          }, this);\r\n        },\r\n        this\r\n      );\r\n    }\r\n  },\r\n\r\n  _filterExistingFeatures: function (oldFrom, oldTo, newFrom, newTo) {\r\n    var layersToRemove =\r\n      oldFrom && oldTo\r\n        ? this._getFeaturesInTimeRange(oldFrom, oldTo)\r\n        : this._currentSnapshot;\r\n    var layersToAdd = this._getFeaturesInTimeRange(newFrom, newTo);\r\n\r\n    if (layersToAdd.indexOf) {\r\n      for (var i = 0; i < layersToAdd.length; i++) {\r\n        var shouldRemoveLayer = layersToRemove.indexOf(layersToAdd[i]);\r\n        if (shouldRemoveLayer >= 0) {\r\n          layersToRemove.splice(shouldRemoveLayer, 1);\r\n        }\r\n      }\r\n    }\r\n\r\n    // schedule adding features until the next animation frame\r\n    Util.requestAnimFrame(\r\n      Util.bind(function () {\r\n        this.removeLayers(layersToRemove);\r\n        this.addLayers(layersToAdd);\r\n      }, this)\r\n    );\r\n  },\r\n\r\n  _getFeaturesInTimeRange: function (start, end) {\r\n    var ids = [];\r\n    var search;\r\n\r\n    if (this.options.timeField.start && this.options.timeField.end) {\r\n      var startTimes = this._startTimeIndex.between(start, end);\r\n      var endTimes = this._endTimeIndex.between(start, end);\r\n      search = startTimes.concat(endTimes);\r\n    } else if (this._timeIndex) {\r\n      search = this._timeIndex.between(start, end);\r\n    } else {\r\n      warn(\r\n        'You must set timeField in the layer constructor in order to manipulate the start and end time filter.'\r\n      );\r\n      return [];\r\n    }\r\n\r\n    for (var i = search.length - 1; i >= 0; i--) {\r\n      ids.push(search[i].id);\r\n    }\r\n\r\n    return ids;\r\n  },\r\n\r\n  _buildTimeIndexes: function (geojson) {\r\n    var i;\r\n    var feature;\r\n    if (this.options.timeField.start && this.options.timeField.end) {\r\n      var startTimeEntries = [];\r\n      var endTimeEntries = [];\r\n      for (i = geojson.length - 1; i >= 0; i--) {\r\n        feature = geojson[i];\r\n        startTimeEntries.push({\r\n          id: feature.id,\r\n          value: new Date(feature.properties[this.options.timeField.start])\r\n        });\r\n        endTimeEntries.push({\r\n          id: feature.id,\r\n          value: new Date(feature.properties[this.options.timeField.end])\r\n        });\r\n      }\r\n      this._startTimeIndex.bulkAdd(startTimeEntries);\r\n      this._endTimeIndex.bulkAdd(endTimeEntries);\r\n    } else {\r\n      var timeEntries = [];\r\n      for (i = geojson.length - 1; i >= 0; i--) {\r\n        feature = geojson[i];\r\n        timeEntries.push({\r\n          id: feature.id,\r\n          value: new Date(feature.properties[this.options.timeField])\r\n        });\r\n      }\r\n\r\n      this._timeIndex.bulkAdd(timeEntries);\r\n    }\r\n  },\r\n\r\n  _featureWithinTimeRange: function (feature) {\r\n    if (!this.options.from || !this.options.to) {\r\n      return true;\r\n    }\r\n\r\n    var from = +this.options.from.valueOf();\r\n    var to = +this.options.to.valueOf();\r\n\r\n    if (typeof this.options.timeField === 'string') {\r\n      var date = +feature.properties[this.options.timeField];\r\n      return date >= from && date <= to;\r\n    }\r\n\r\n    if (this.options.timeField.start && this.options.timeField.end) {\r\n      var startDate = +feature.properties[this.options.timeField.start];\r\n      var endDate = +feature.properties[this.options.timeField.end];\r\n      return (\r\n        (startDate >= from && startDate <= to) ||\r\n        (endDate >= from && endDate <= to) ||\r\n        (startDate <= from && endDate >= to)\r\n      );\r\n    }\r\n  },\r\n\r\n  _visibleZoom: function () {\r\n    // check to see whether the current zoom level of the map is within the optional limit defined for the FeatureLayer\r\n    if (!this._map) {\r\n      return false;\r\n    }\r\n    var zoom = this._map.getZoom();\r\n    if (zoom > this.options.maxZoom || zoom < this.options.minZoom) {\r\n      return false;\r\n    } else {\r\n      return true;\r\n    }\r\n  },\r\n\r\n  _handleZoomChange: function () {\r\n    if (!this._visibleZoom()) {\r\n      this.removeLayers(this._currentSnapshot);\r\n      this._currentSnapshot = [];\r\n    } else {\r\n      /*\r\n      for every cell in this._cells\r\n        1. Get the cache key for the coords of the cell\r\n        2. If this._cache[key] exists it will be an array of feature IDs.\r\n        3. Call this.addLayers(this._cache[key]) to instruct the feature layer to add the layers back.\r\n      */\r\n      for (var i in this._cells) {\r\n        var coords = this._cells[i].coords;\r\n        var key = this._cacheKey(coords);\r\n        if (this._cache[key]) {\r\n          this.addLayers(this._cache[key]);\r\n        }\r\n      }\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Service Methods\r\n   */\r\n\r\n  authenticate: function (token) {\r\n    this.service.authenticate(token);\r\n    return this;\r\n  },\r\n\r\n  metadata: function (callback, context) {\r\n    this.service.metadata(callback, context);\r\n    return this;\r\n  },\r\n\r\n  query: function () {\r\n    return this.service.query();\r\n  },\r\n\r\n  _getMetadata: function (callback) {\r\n    if (this._metadata) {\r\n      var error;\r\n      callback(error, this._metadata);\r\n    } else {\r\n      this.metadata(\r\n        Util.bind(function (error, response) {\r\n          this._metadata = response;\r\n          callback(error, this._metadata);\r\n        }, this)\r\n      );\r\n    }\r\n  },\r\n\r\n  addFeature: function (feature, callback, context) {\r\n    this.addFeatures(feature, callback, context);\r\n  },\r\n\r\n  addFeatures: function (features, callback, context) {\r\n    this._getMetadata(\r\n      Util.bind(function (error, metadata) {\r\n        if (error) {\r\n          if (callback) {\r\n            callback.call(this, error, null);\r\n          }\r\n          return;\r\n        }\r\n        // GeoJSON featureCollection or simple feature\r\n        var featuresArray = features.features ? features.features : [features];\r\n\r\n        this.service.addFeatures(\r\n          features,\r\n          Util.bind(function (error, response) {\r\n            if (!error) {\r\n              for (var i = featuresArray.length - 1; i >= 0; i--) {\r\n                // assign ID from result to appropriate objectid field from service metadata\r\n                featuresArray[i].properties[metadata.objectIdField] =\r\n                  featuresArray.length > 1\r\n                    ? response[i].objectId\r\n                    : response.objectId;\r\n                // we also need to update the geojson id for createLayers() to function\r\n                featuresArray[i].id =\r\n                  featuresArray.length > 1\r\n                    ? response[i].objectId\r\n                    : response.objectId;\r\n              }\r\n              this.createLayers(featuresArray);\r\n            }\r\n\r\n            if (callback) {\r\n              callback.call(context, error, response);\r\n            }\r\n          }, this)\r\n        );\r\n      }, this)\r\n    );\r\n  },\r\n\r\n  updateFeature: function (feature, callback, context) {\r\n    this.updateFeatures(feature, callback, context);\r\n  },\r\n\r\n  updateFeatures: function (features, callback, context) {\r\n    // GeoJSON featureCollection or simple feature\r\n    var featuresArray = features.features ? features.features : [features];\r\n    this.service.updateFeatures(\r\n      features,\r\n      function (error, response) {\r\n        if (!error) {\r\n          for (var i = featuresArray.length - 1; i >= 0; i--) {\r\n            this.removeLayers([featuresArray[i].id], true);\r\n          }\r\n          this.createLayers(featuresArray);\r\n        }\r\n\r\n        if (callback) {\r\n          callback.call(context, error, response);\r\n        }\r\n      },\r\n      this\r\n    );\r\n  },\r\n\r\n  deleteFeature: function (id, callback, context) {\r\n    this.deleteFeatures(id, callback, context);\r\n  },\r\n\r\n  deleteFeatures: function (ids, callback, context) {\r\n    return this.service.deleteFeatures(\r\n      ids,\r\n      function (error, response) {\r\n        var responseArray = response.length ? response : [response];\r\n        if (!error && responseArray.length > 0) {\r\n          for (var i = responseArray.length - 1; i >= 0; i--) {\r\n            this.removeLayers([responseArray[i].objectId], true);\r\n          }\r\n        }\r\n        if (callback) {\r\n          callback.call(context, error, response);\r\n        }\r\n      },\r\n      this\r\n    );\r\n  }\r\n});\r\n","import { Path, Util, GeoJSON, latLng } from 'leaflet';\r\nimport { FeatureManager } from './FeatureManager';\r\nimport { warn } from '../../Util';\r\n\r\nexport var FeatureLayer = FeatureManager.extend({\r\n\r\n  options: {\r\n    cacheLayers: true\r\n  },\r\n\r\n  /**\r\n   * Constructor\r\n   */\r\n  initialize: function (options) {\r\n    FeatureManager.prototype.initialize.call(this, options);\r\n    this._originalStyle = this.options.style;\r\n    this._layers = {};\r\n  },\r\n\r\n  /**\r\n   * Layer Interface\r\n   */\r\n\r\n  onRemove: function (map) {\r\n    for (var i in this._layers) {\r\n      map.removeLayer(this._layers[i]);\r\n      // trigger the event when the entire featureLayer is removed from the map\r\n      this.fire('removefeature', {\r\n        feature: this._layers[i].feature,\r\n        permanent: false\r\n      }, true);\r\n    }\r\n\r\n    return FeatureManager.prototype.onRemove.call(this, map);\r\n  },\r\n\r\n  createNewLayer: function (geojson) {\r\n    var layer = GeoJSON.geometryToLayer(geojson, this.options);\r\n    // trap for GeoJSON without geometry\r\n    if (layer) {\r\n      layer.defaultOptions = layer.options;\r\n    }\r\n    return layer;\r\n  },\r\n\r\n  _updateLayer: function (layer, geojson) {\r\n    // convert the geojson coordinates into a Leaflet LatLng array/nested arrays\r\n    // pass it to setLatLngs to update layer geometries\r\n    var latlngs = [];\r\n    var coordsToLatLng = this.options.coordsToLatLng || GeoJSON.coordsToLatLng;\r\n\r\n    // copy new attributes, if present\r\n    if (geojson.properties) {\r\n      layer.feature.properties = geojson.properties;\r\n    }\r\n\r\n    switch (geojson.geometry.type) {\r\n      case 'Point':\r\n        latlngs = GeoJSON.coordsToLatLng(geojson.geometry.coordinates);\r\n        layer.setLatLng(latlngs);\r\n        break;\r\n      case 'LineString':\r\n        latlngs = GeoJSON.coordsToLatLngs(geojson.geometry.coordinates, 0, coordsToLatLng);\r\n        layer.setLatLngs(latlngs);\r\n        break;\r\n      case 'MultiLineString':\r\n        latlngs = GeoJSON.coordsToLatLngs(geojson.geometry.coordinates, 1, coordsToLatLng);\r\n        layer.setLatLngs(latlngs);\r\n        break;\r\n      case 'Polygon':\r\n        latlngs = GeoJSON.coordsToLatLngs(geojson.geometry.coordinates, 1, coordsToLatLng);\r\n        layer.setLatLngs(latlngs);\r\n        break;\r\n      case 'MultiPolygon':\r\n        latlngs = GeoJSON.coordsToLatLngs(geojson.geometry.coordinates, 2, coordsToLatLng);\r\n        layer.setLatLngs(latlngs);\r\n        break;\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Feature Management Methods\r\n   */\r\n\r\n  createLayers: function (features) {\r\n    for (var i = features.length - 1; i >= 0; i--) {\r\n      var geojson = features[i];\r\n\r\n      var layer = this._layers[geojson.id];\r\n      var newLayer;\r\n\r\n      if (this._visibleZoom() && layer && !this._map.hasLayer(layer) && (!this.options.timeField || this._featureWithinTimeRange(geojson))) {\r\n        this._map.addLayer(layer);\r\n        this.fire('addfeature', {\r\n          feature: layer.feature\r\n        }, true);\r\n      }\r\n\r\n      // update geometry if necessary\r\n      if (layer && this.options.simplifyFactor > 0 && (layer.setLatLngs || layer.setLatLng)) {\r\n        this._updateLayer(layer, geojson);\r\n      }\r\n\r\n      if (!layer) {\r\n        newLayer = this.createNewLayer(geojson);\r\n\r\n        if (!newLayer) {\r\n          warn('invalid GeoJSON encountered');\r\n        } else {\r\n          newLayer.feature = geojson;\r\n\r\n          // bubble events from individual layers to the feature layer\r\n          newLayer.addEventParent(this);\r\n\r\n          if (this.options.onEachFeature) {\r\n            this.options.onEachFeature(newLayer.feature, newLayer);\r\n          }\r\n\r\n          // cache the layer\r\n          this._layers[newLayer.feature.id] = newLayer;\r\n\r\n          // style the layer\r\n          this.setFeatureStyle(newLayer.feature.id, this.options.style);\r\n\r\n          this.fire('createfeature', {\r\n            feature: newLayer.feature\r\n          }, true);\r\n\r\n          // add the layer if the current zoom level is inside the range defined for the layer, it is within the current time bounds or our layer is not time enabled\r\n          if (this._visibleZoom() && (!this.options.timeField || (this.options.timeField && this._featureWithinTimeRange(geojson)))) {\r\n            this._map.addLayer(newLayer);\r\n          }\r\n        }\r\n      }\r\n    }\r\n  },\r\n\r\n  addLayers: function (ids) {\r\n    for (var i = ids.length - 1; i >= 0; i--) {\r\n      var layer = this._layers[ids[i]];\r\n      if (layer && (!this.options.timeField || this._featureWithinTimeRange(layer.feature))) {\r\n        this._map.addLayer(layer);\r\n      }\r\n    }\r\n  },\r\n\r\n  removeLayers: function (ids, permanent) {\r\n    for (var i = ids.length - 1; i >= 0; i--) {\r\n      var id = ids[i];\r\n      var layer = this._layers[id];\r\n      if (layer) {\r\n        this.fire('removefeature', {\r\n          feature: layer.feature,\r\n          permanent: permanent\r\n        }, true);\r\n        this._map.removeLayer(layer);\r\n      }\r\n      if (layer && permanent) {\r\n        delete this._layers[id];\r\n      }\r\n    }\r\n  },\r\n\r\n  cellEnter: function (bounds, coords) {\r\n    if (this._visibleZoom() && !this._zooming && this._map) {\r\n      Util.requestAnimFrame(Util.bind(function () {\r\n        var cacheKey = this._cacheKey(coords);\r\n        var cellKey = this._cellCoordsToKey(coords);\r\n        var layers = this._cache[cacheKey];\r\n        if (this._activeCells[cellKey] && layers) {\r\n          this.addLayers(layers);\r\n        }\r\n      }, this));\r\n    }\r\n  },\r\n\r\n  cellLeave: function (bounds, coords) {\r\n    if (!this._zooming) {\r\n      Util.requestAnimFrame(Util.bind(function () {\r\n        if (this._map) {\r\n          var cacheKey = this._cacheKey(coords);\r\n          var cellKey = this._cellCoordsToKey(coords);\r\n          var layers = this._cache[cacheKey];\r\n          var mapBounds = this._map.getBounds();\r\n          if (!this._activeCells[cellKey] && layers) {\r\n            var removable = true;\r\n\r\n            for (var i = 0; i < layers.length; i++) {\r\n              var layer = this._layers[layers[i]];\r\n              if (layer && layer.getBounds && mapBounds.intersects(layer.getBounds())) {\r\n                removable = false;\r\n              }\r\n            }\r\n\r\n            if (removable) {\r\n              this.removeLayers(layers, !this.options.cacheLayers);\r\n            }\r\n\r\n            if (!this.options.cacheLayers && removable) {\r\n              delete this._cache[cacheKey];\r\n              delete this._cells[cellKey];\r\n              delete this._activeCells[cellKey];\r\n            }\r\n          }\r\n        }\r\n      }, this));\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Styling Methods\r\n   */\r\n\r\n  resetStyle: function () {\r\n    this.options.style = this._originalStyle;\r\n    this.eachFeature(function (layer) {\r\n      this.resetFeatureStyle(layer.feature.id);\r\n    }, this);\r\n    return this;\r\n  },\r\n\r\n  setStyle: function (style) {\r\n    this.options.style = style;\r\n    this.eachFeature(function (layer) {\r\n      this.setFeatureStyle(layer.feature.id, style);\r\n    }, this);\r\n    return this;\r\n  },\r\n\r\n  resetFeatureStyle: function (id) {\r\n    var layer = this._layers[id];\r\n    var style = this._originalStyle || Path.prototype.options;\r\n    if (layer) {\r\n      Util.extend(layer.options, layer.defaultOptions);\r\n      this.setFeatureStyle(id, style);\r\n    }\r\n    return this;\r\n  },\r\n\r\n  setFeatureStyle: function (id, style) {\r\n    var layer = this._layers[id];\r\n    if (typeof style === 'function') {\r\n      style = style(layer.feature);\r\n    }\r\n    if (layer.setStyle) {\r\n      layer.setStyle(style);\r\n    }\r\n    return this;\r\n  },\r\n\r\n  /**\r\n   * Utility Methods\r\n   */\r\n\r\n  eachActiveFeature: function (fn, context) {\r\n    // figure out (roughly) which layers are in view\r\n    if (this._map) {\r\n      var activeBounds = this._map.getBounds();\r\n      for (var i in this._layers) {\r\n        if (this._currentSnapshot.indexOf(this._layers[i].feature.id) !== -1) {\r\n          // a simple point in poly test for point geometries\r\n          if (typeof this._layers[i].getLatLng === 'function' && activeBounds.contains(this._layers[i].getLatLng())) {\r\n            fn.call(context, this._layers[i]);\r\n          } else if (typeof this._layers[i].getBounds === 'function' && activeBounds.intersects(this._layers[i].getBounds())) {\r\n            // intersecting bounds check for polyline and polygon geometries\r\n            fn.call(context, this._layers[i]);\r\n          }\r\n        }\r\n      }\r\n    }\r\n    return this;\r\n  },\r\n\r\n  eachFeature: function (fn, context) {\r\n    for (var i in this._layers) {\r\n      fn.call(context, this._layers[i]);\r\n    }\r\n    return this;\r\n  },\r\n\r\n  getFeature: function (id) {\r\n    return this._layers[id];\r\n  },\r\n\r\n  bringToBack: function () {\r\n    this.eachFeature(function (layer) {\r\n      if (layer.bringToBack) {\r\n        layer.bringToBack();\r\n      }\r\n    });\r\n  },\r\n\r\n  bringToFront: function () {\r\n    this.eachFeature(function (layer) {\r\n      if (layer.bringToFront) {\r\n        layer.bringToFront();\r\n      }\r\n    });\r\n  },\r\n\r\n  redraw: function (id) {\r\n    if (id) {\r\n      this._redraw(id);\r\n    }\r\n    return this;\r\n  },\r\n\r\n  _redraw: function (id) {\r\n    var layer = this._layers[id];\r\n    var geojson = layer.feature;\r\n\r\n    // if this looks like a marker\r\n    if (layer && layer.setIcon && this.options.pointToLayer) {\r\n      // update custom symbology, if necessary\r\n      if (this.options.pointToLayer) {\r\n        var getIcon = this.options.pointToLayer(geojson, latLng(geojson.geometry.coordinates[1], geojson.geometry.coordinates[0]));\r\n        var updatedIcon = getIcon.options.icon;\r\n        layer.setIcon(updatedIcon);\r\n      }\r\n    }\r\n\r\n    // looks like a vector marker (circleMarker)\r\n    if (layer && layer.setStyle && this.options.pointToLayer) {\r\n      var getStyle = this.options.pointToLayer(geojson, latLng(geojson.geometry.coordinates[1], geojson.geometry.coordinates[0]));\r\n      var updatedStyle = getStyle.options;\r\n      this.setFeatureStyle(geojson.id, updatedStyle);\r\n    }\r\n\r\n    // looks like a path (polygon/polyline)\r\n    if (layer && layer.setStyle && this.options.style) {\r\n      this.resetStyle(geojson.id);\r\n    }\r\n  }\r\n});\r\n\r\nexport function featureLayer (options) {\r\n  return new FeatureLayer(options);\r\n}\r\n\r\nexport default featureLayer;\r\n","// export version\r\nexport {version as VERSION} from '../package.json';\r\n\r\n// import base\r\nexport { Support } from './Support';\r\nexport { options } from './Options';\r\nexport { EsriUtil as Util } from './Util';\r\nexport { get, post, request } from './Request';\r\n\r\n// export tasks\r\nexport { Task, task } from './Tasks/Task';\r\nexport { Query, query } from './Tasks/Query';\r\nexport { Find, find } from './Tasks/Find';\r\nexport { Identify, identify } from './Tasks/Identify';\r\nexport { IdentifyFeatures, identifyFeatures } from './Tasks/IdentifyFeatures';\r\nexport { IdentifyImage, identifyImage } from './Tasks/IdentifyImage';\r\n\r\n// export services\r\nexport { Service, service } from './Services/Service';\r\nexport { MapService, mapService } from './Services/MapService';\r\nexport { ImageService, imageService } from './Services/ImageService';\r\nexport { FeatureLayerService, featureLayerService } from './Services/FeatureLayerService';\r\n\r\n// export layers\r\nexport { BasemapLayer, basemapLayer } from './Layers/BasemapLayer';\r\nexport { TiledMapLayer, tiledMapLayer } from './Layers/TiledMapLayer';\r\nexport { RasterLayer } from './Layers/RasterLayer';\r\nexport { ImageMapLayer, imageMapLayer } from './Layers/ImageMapLayer';\r\nexport { DynamicMapLayer, dynamicMapLayer } from './Layers/DynamicMapLayer';\r\nexport { FeatureManager } from './Layers/FeatureLayer/FeatureManager';\r\nexport { FeatureLayer, featureLayer } from './Layers/FeatureLayer/FeatureLayer';\r\n"],"names":["Util","DomUtil","geojsonToArcGIS","g2a","arcgisToGeoJSON","a2g","latLng","latLngBounds","options","LatLngBounds","LatLng","GeoJSON","Class","point","Evented","request","TileLayer","DomEvent","CRS","ImageOverlay","Layer","popup","bounds","Browser","Point","Bounds","Path"],"mappings":"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"}